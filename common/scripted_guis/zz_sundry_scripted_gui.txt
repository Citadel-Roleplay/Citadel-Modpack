agot_name = {
	scope = character

	is_shown = {
		OR = {
			is_ruler = yes
			primary_title.tier >= tier_barony
			any_spouse = {
				is_ruler = yes
			}
			any_spouse = {
				primary_title.tier >= tier_barony
			}

			father ?= {
				primary_title.tier >= tier_kingdom
				primary_title.holder ?= {
					exists = yes
					NOR = {
						has_government = free_city_government
						has_government = administrative_government
						has_government = landless_adventurer_government
						has_government = nights_watch_government
						has_government = tribal_government
						has_government = oligarchic_government
					}
				}
				NOR = {
					has_government = free_city_government
					has_government = administrative_government
					has_government = landless_adventurer_government
					has_government = nights_watch_government
					has_government = tribal_government
					has_government = oligarchic_government
				}
			}
			AND = {
				mother ?= {
					primary_title.tier >= tier_kingdom
					primary_title.holder ?= {
						exists = yes
						NOR = {
							has_government = free_city_government
							has_government = administrative_government
							has_government = landless_adventurer_government
							has_government = nights_watch_government
							has_government = tribal_government
							has_government = oligarchic_government
						}
					}
					NOR = {
						has_government = free_city_government
						has_government = administrative_government
						has_government = landless_adventurer_government
						has_government = nights_watch_government
						has_government = tribal_government
						has_government = oligarchic_government
					}
				}
				trigger_if = { #For when a husband is landless
					limit = {
						father ?= {
							primary_title.tier >= tier_barony
							primary_title.tier >= root.mother.primary_title.tier
						}
					}
					father ?= {
						primary_title.holder ?= {
							exists = yes
							NOR = {
								has_government = free_city_government
								has_government = administrative_government
								has_government = landless_adventurer_government
								has_government = nights_watch_government
								has_government = tribal_government
								has_government = oligarchic_government
								primary_title.tier < tier_kingdom
							}
						}
						NOR = {
							has_government = free_city_government
							has_government = administrative_government
							has_government = landless_adventurer_government
							has_government = nights_watch_government
							has_government = tribal_government
							has_government = oligarchic_government
						}
					}
				}
			}
			is_lowborn = yes

			#Birthplace Based Surname is Invalid
			AND = {
				has_character_flag = birthplace_surname
				any_spouse = { is_ruler = yes }
			}
		}
		NOR = {
			has_title = title:k_the_most_devout
			AND = {
				has_trait = silent_sister
				is_ruler = no
			}
			AND = {
				OR = {
					has_trait = maester
					has_trait = maester_historical
				}
				is_ruler = no
			}
			AND = {
				OR = {
					has_trait = bastard
					OR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
				NOT = { has_trait = silent_sister }
				OR = {
					has_trait = knight
					AND = {
						has_trait_xp = {
							trait = squire
							track = knight
							value >= 100
						}
						OR = {
							age >= 16 #You are at least 16
							AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
								age < 16
								age >= 12
								#Youngest knight was Daemon Blackfyre
								prowess >= extremely_high_skill_rating
							}
						}
					}
				}
				NOR = {
					has_trait = maester #you shouldn't be able to knight maesters anyway but just in case
					has_trait = maester_historical
				}
				NOT = { has_council_position = kingsguard_lord_commander}
				NOT = { any_spouse = { is_ruler = yes } }
				NOR = {
					is_ruler = yes
					primary_title.tier >= tier_barony
				}
			}
			AND = {
				OR = {
					has_trait = knight
					AND = {
						has_trait_xp = {
							trait = squire
							track = knight
							value >= 100
						}
						OR = {
							age >= 16 #You are at least 16
							AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
								age < 16
								age >= 12
								#Youngest knight was Daemon Blackfyre
								prowess >= extremely_high_skill_rating
							}
						}
					}
				}

				NOR = {
					has_trait = maester #you shouldn't be able to knight maesters anyway but just in case
					has_trait = maester_historical
				}
				NOT = {
					has_council_position = kingsguard_lord_commander
					primary_title = title:d_kingsguard
				}
				NOT = { any_spouse = { is_ruler = yes } }
				NOR = {
					has_trait = bastard
					OR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
				NOT = { has_trait = silent_sister }
				NOR = {
					is_ruler = yes
					primary_title.tier >= tier_barony
					father ?= {
						primary_title.tier >= tier_kingdom
						OR = {
							AND = {
								primary_title.holder ?= {
									exists = yes
								}
								primary_title = title:k_dragonstone
								dynasty ?= dynasty:dynn_Targaryen
								agot_is_independent_ruler = no
							}
							primary_title.holder ?= {
								exists = yes
								OR = {
									agot_is_independent_ruler = yes
									vassal_contract_has_flag = has_palatinate_contract
								}
								NOR = {
									has_government = free_city_government
									has_government = administrative_government
									has_government = landless_adventurer_government
									has_government = nights_watch_government
									has_government = tribal_government
									has_government = oligarchic_government
								}
							}
						}
						NOR = {
							has_government = free_city_government
							has_government = administrative_government
							has_government = landless_adventurer_government
							has_government = nights_watch_government
							has_government = tribal_government
							has_government = oligarchic_government
						}
					}
					mother ?= {
						primary_title.tier >= tier_kingdom
						OR = {
							AND = {
								primary_title.holder ?= {
									exists = yes
								}
								primary_title = title:k_dragonstone
								dynasty ?= dynasty:dynn_Targaryen
								agot_is_independent_ruler = no
							}
							primary_title.holder ?= {
								exists = yes
								OR = {
									agot_is_independent_ruler = yes
									vassal_contract_has_flag = has_palatinate_contract
								}
								NOR = {
									has_government = free_city_government
									has_government = administrative_government
									has_government = landless_adventurer_government
									has_government = nights_watch_government
									has_government = tribal_government
									has_government = oligarchic_government
								}
							}
						}
						NOR = {
							has_government = free_city_government
							has_government = administrative_government
							has_government = landless_adventurer_government
							has_government = nights_watch_government
							has_government = tribal_government
							has_government = oligarchic_government
						}
					}
				}
			}
			AND = {
				OR = {
					has_trait = bastard
					OR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
				NOR = {
					is_ruler = yes
					primary_title.tier >= tier_barony
				}
				NOT = { has_council_position = kingsguard_lord_commander}
				NOT = { any_spouse = { is_ruler = yes } }
				NOT = { has_trait = silent_sister }
				NOT = {
					OR = {
						has_trait = knight
						AND = {
							has_trait_xp = {
								trait = squire
								track = knight
								value >= 100
							}
							OR = {
								age >= 16 #You are at least 16
								AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
									age < 16
									age >= 12
									#Youngest knight was Daemon Blackfyre
									prowess >= extremely_high_skill_rating
								}
							}
						}
					}
					OR = {
						has_trait = maester
						has_trait = maester_historical
					}
				}
			}

			#Birthplace Based Surname is Valid
			AND = {
				has_character_flag = birthplace_surname
				NOT = { any_spouse = { is_ruler = yes } }
			}
		}
	}
}

agot_name_unlanded = {
	scope = character

	is_shown = {
		NOR = {
			is_ruler = yes
			primary_title.tier >= tier_barony
			any_spouse = {
				is_ruler = yes
			}
			any_spouse = {
				primary_title.tier >= tier_barony
			}

			father ?= {
				primary_title.tier >= tier_kingdom
				primary_title.holder ?= {
					exists = yes
					NOR = {
						has_government = free_city_government
						has_government = administrative_government
						has_government = landless_adventurer_government
						has_government = nights_watch_government
						has_government = tribal_government
						has_government = oligarchic_government
					}
				}
				NOR = {
					has_government = free_city_government
					has_government = administrative_government
					has_government = landless_adventurer_government
					has_government = nights_watch_government
					has_government = tribal_government
					has_government = oligarchic_government
				}
			}
			AND = {
				mother ?= {
					primary_title.tier >= tier_kingdom
					primary_title.holder ?= {
						exists = yes
						NOR = {
							has_government = free_city_government
							has_government = administrative_government
							has_government = landless_adventurer_government
							has_government = nights_watch_government
							has_government = tribal_government
							has_government = oligarchic_government
						}
					}
					NOR = {
						has_government = free_city_government
						has_government = administrative_government
						has_government = landless_adventurer_government
						has_government = nights_watch_government
						has_government = tribal_government
						has_government = oligarchic_government
					}
				}
				trigger_if = { #For when a husband is landless
					limit = {
						father ?= {
							primary_title.tier >= tier_barony
							primary_title.tier >= root.mother.primary_title.tier
						}
					}
					father ?= {
						primary_title.holder ?= {
							exists = yes
							NOR = {
								has_government = free_city_government
								has_government = administrative_government
								has_government = landless_adventurer_government
								has_government = nights_watch_government
								has_government = tribal_government
								has_government = oligarchic_government
								primary_title.tier < tier_kingdom
							}
						}
						NOR = {
							has_government = free_city_government
							has_government = administrative_government
							has_government = landless_adventurer_government
							has_government = nights_watch_government
							has_government = tribal_government
							has_government = oligarchic_government
						}
					}
				}
			}
			is_lowborn = yes
		}
		NOR = {
			has_title = title:k_the_most_devout
			AND = {
				has_trait = silent_sister
				is_ruler = no
			}
			AND = {
				OR = {
					has_trait = maester
					has_trait = maester_historical
				}
				is_ruler = no
			}
			AND = {
				OR = {
					has_trait = bastard
					OR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
				NOT = { has_trait = silent_sister }
				OR = {
					has_trait = knight
					AND = {
						has_trait_xp = {
							trait = squire
							track = knight
							value >= 100
						}
						OR = {
							age >= 16 #You are at least 16
							AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
								age < 16
								age >= 12
								#Youngest knight was Daemon Blackfyre
								prowess >= extremely_high_skill_rating
							}
						}
					}
				}
				NOR = {
					has_trait = maester #you shouldn't be able to knight maesters anyway but just in case
					has_trait = maester_historical
				}
				NOT = { has_council_position = kingsguard_lord_commander}
				NOT = { any_spouse = { is_ruler = yes } }
				NOR = {
					is_ruler = yes
					primary_title.tier >= tier_barony
				}
			}
			AND = {
				OR = {
					has_trait = knight
					AND = {
						has_trait_xp = {
							trait = squire
							track = knight
							value >= 100
						}
						OR = {
							age >= 16 #You are at least 16
							AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
								age < 16
								age >= 12
								#Youngest knight was Daemon Blackfyre
								prowess >= extremely_high_skill_rating
							}
						}
					}
				}

				NOR = {
					has_trait = maester #you shouldn't be able to knight maesters anyway but just in case
					has_trait = maester_historical
				}
				NOT = {
					has_council_position = kingsguard_lord_commander
					primary_title = title:d_kingsguard
				}
				NOT = { any_spouse = { is_ruler = yes } }
				NOR = {
					has_trait = bastard
					OR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
				NOT = { has_trait = silent_sister }
				NOR = {
					is_ruler = yes
					primary_title.tier >= tier_barony
				}
			}
			AND = {
				OR = {
					has_trait = bastard
					OR = {
						has_inactive_trait = surname_flowers
						has_inactive_trait = surname_hill
						has_inactive_trait = surname_pyke
						has_inactive_trait = surname_rivers
						has_inactive_trait = surname_sand
						has_inactive_trait = surname_snow
						has_inactive_trait = surname_stone
						has_inactive_trait = surname_storm
						has_inactive_trait = surname_waters
					}
				}
				NOR = {
					is_ruler = yes
					primary_title.tier >= tier_barony
				}
				NOT = { has_council_position = kingsguard_lord_commander}
				NOT = { any_spouse = { is_ruler = yes } }
				NOT = { has_trait = silent_sister }
				NOT = {
					OR = {
						has_trait = knight
						AND = {
							has_trait_xp = {
								trait = squire
								track = knight
								value >= 100
							}
							OR = {
								age >= 16 #You are at least 16
								AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
									age < 16
									age >= 12
									#Youngest knight was Daemon Blackfyre
									prowess >= extremely_high_skill_rating
								}
							}
						}
					}
					OR = {
						has_trait = maester
						has_trait = maester_historical
					}
				}
			}
		}
	}
}

agot_ser_knight = {
	scope = character

	is_shown = {
		OR = {
			has_trait = knight
			AND = {
				has_trait_xp = {
					trait = squire
					track = knight
					value >= 100
				}
				OR = {
					age >= 16 #You are at least 16
					AND = { #You are 12 or older and either: your prowess is >= 20; or, your prowess is >=15 and you are a formiddable fighter
						age < 16
						age >= 12
						#Youngest knight was Daemon Blackfyre
						prowess >= extremely_high_skill_rating
					}
				}
			}
		}

		NOR = {
			has_trait = maester #you shouldn't be able to knight maesters anyway but just in case
			has_trait = maester_historical
		}
		NOT = {
			has_council_position = kingsguard_lord_commander
			primary_title = title:d_kingsguard
		}
		NOT = { any_spouse = { is_ruler = yes } }
		NOR = {
			has_trait = bastard
			OR = {
				has_inactive_trait = surname_flowers
				has_inactive_trait = surname_hill
				has_inactive_trait = surname_pyke
				has_inactive_trait = surname_rivers
				has_inactive_trait = surname_sand
				has_inactive_trait = surname_snow
				has_inactive_trait = surname_stone
				has_inactive_trait = surname_storm
				has_inactive_trait = surname_waters
			}
		}
		NOT = { has_trait = silent_sister }
		NOR = {
			is_ruler = yes
			primary_title.tier >= tier_barony
		}

		#Princes/Princesses
		NOR = {
			father ?= {
				primary_title.tier >= tier_kingdom
				OR = {
					AND = {
						primary_title.holder ?= {
							exists = yes
						}
						primary_title = title:k_dragonstone
						dynasty ?= dynasty:dynn_Targaryen
						agot_is_independent_ruler = no
					}
					primary_title.holder ?= {
						exists = yes
						OR = {
							agot_is_independent_ruler = yes
							vassal_contract_has_flag = has_palatinate_contract
						}
						NOR = {
							has_government = free_city_government
							has_government = administrative_government
							has_government = landless_adventurer_government
							has_government = tribal_government
							has_government = oligarchic_government
						}
					}
				}
				NOR = {
					has_government = free_city_government
					has_government = administrative_government
					has_government = landless_adventurer_government
					has_government = tribal_government
					has_government = oligarchic_government
				}
			}
			mother ?= {
				primary_title.tier >= tier_kingdom
				OR = {
					AND = {
						primary_title.holder ?= {
							exists = yes
						}
						primary_title = title:k_dragonstone
						dynasty ?= dynasty:dynn_Targaryen
					}
					primary_title.holder ?= {
						exists = yes
						OR = {
							agot_is_independent_ruler = yes
							vassal_contract_has_flag = has_palatinate_contract
						}
						NOR = {
							has_government = free_city_government
							has_government = administrative_government
							has_government = landless_adventurer_government
							has_government = tribal_government
							has_government = oligarchic_government
						}
					}
				}
				NOR = {
					has_government = free_city_government
					has_government = administrative_government
					has_government = landless_adventurer_government
					has_government = tribal_government
					has_government = oligarchic_government
				}
			}
		}
		NOT = { has_character_flag = birthplace_surname }
	}
}