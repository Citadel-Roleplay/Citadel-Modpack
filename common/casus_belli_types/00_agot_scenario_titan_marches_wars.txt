# Fourth Braavosi-Pentoshi War for 170 AC
fourth_braavosi_pentoshi_war = {
	icon = vassalization
	group = vassalization
	target_titles = claim
	allow_hostages = yes
	white_peace_possible = yes

	allowed_for_character = {
		always = no
	}

	allowed_against_character = {
		always = no
	}

	valid_to_start = {
		always = no
	}

	should_invalidate = {
		NOT = {
			exists = title:k_braavos.holder
		}
		NOT = {
			exists = title:k_pentos.holder
		}
		scope:attacker != title:k_braavos.holder
		scope:defender != title:k_pentos.holder
	}

	on_declaration = {
		on_declared_war = yes
	}

	on_victory_desc = {
		desc = fourth_braavosi_pentoshi_war_desc
	}

	on_victory = {
		scope:defender = { add_prestige = -1000 }
		scope:attacker = { show_pow_release_message_effect = yes }
		hidden_effect = {
			scope:attacker = {
				add_truce_both_ways = {
					character = scope:defender
					days = 1825
					war = root.war
					result = victory
				}
			}
		}

		##################################

		create_title_and_vassal_change = {
			type = conquest
			save_scope_as = change
			add_claim_on_loss = yes
		}
		title:d_andalimark = {
			change_title_holder = {
				holder = scope:attacker
				change = scope:change
			}
		}
		title:c_coronyll = {
			change_title_holder = {
				holder = scope:attacker
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		scope:defender = {
			every_vassal = {
				limit = {
					primary_title = {
						OR = {
							any_this_title_or_de_jure_above = { this = title:d_andalimark }
							any_this_title_or_de_jure_above = { this = title:d_jelmark }
							any_this_title_or_de_jure_above = { this = title:d_sojourners_coast }
						}
					}
				}
				change_liege = {
					liege = scope:attacker
					change = scope:change
				}
			}
		}
		title:c_armiridge = {
			change_title_holder = {
				holder = title:c_crone_moors.holder
				change = scope:change
			}
		}
		title:c_tableland = {
			change_title_holder = {
				holder = title:c_coronyll.holder
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		#Exiled Sealord offers dragon eggs to Pentos
		character:Prestayn_74 = {
			trigger_event = {
				id = agot_titans_march.4001
				days = { 10 365 }
			}
		}
	}

	on_white_peace_desc = {
		desc = fourth_braavosi_pentoshi_war_white_peace_desc
	}

	on_white_peace = {
		#Exiled Sealord offers dragon eggs to Pentos
		character:Prestayn_74 = {
			trigger_event = {
				id = agot_titans_march.4001
				days = { 10 365 }
			}
		}
	}

	on_defeat_desc = {
		desc = fourth_braavosi_pentoshi_war_on_defeat_desc
	}

	on_defeat = {
		custom_tooltip = fourth_braavosi_pentoshi_war_on_defeat_tt
		scope:attacker = {
			add_prestige = -1000
			show_pow_release_message_effect = yes
		}
		scope:defender = {
			add_dread = medium_dread_gain
			trigger_event = agot_titans_march.5000
		}

		#Exiled Sealord offers dragon eggs to Pentos
		character:Prestayn_74 = {
			trigger_event = {
				id = agot_titans_march.4001
				days = { 10 365 }
			}
		}
	}

	on_invalidated_desc = msg_invalidate_war_title

	on_invalidated = {
		#Exiled Sealord offers dragon eggs to Pentos
		character:Prestayn_74 = {
			trigger_event = {
				id = agot_titans_march.4001
				days = { 10 365 }
			}
		}
	}

	check_attacker_inheritance_validity = no
	check_defender_inheritance_validity = no

	on_primary_attacker_death = inherit
	on_primary_defender_death = inherit

	transfer_behavior = transfer

	attacker_allies_inherit = yes
	defender_allies_inherit = yes

	war_name = "war_fourth_BP"

	interface_priority = 80

	attacker_wargoal_percentage = 0.8

	attacker_score_from_occupation_scale = 75
	defender_score_from_occupation_scale = 75
	max_attacker_score_from_battles = 100
	max_defender_score_from_battles = 100
}