agot_scripted_laamp_legitimist_support_contract = {
	group = laamp_contracts_legitimist_group
	icon = "gfx/interface/icons/scheme_types/diplomacy.dds"

	travel = yes
	use_diplomatic_range = yes

	weight = {
		value = 0
	}

	valid_to_create = {
		# Standard triggers.
		valid_laamp_basic_trigger = {
			EMPLOYER = scope:employer
			LAAMP = root
		}
		has_realm_law = camp_purpose_legitimists
		has_targaryen_exile_story = yes
		scope:employer = {
			opinion = {
				target = root
				value > 60
			}
		}
		scope:employer.primary_title.tier >= tier_kingdom
	}

	valid_to_continue = {
		# Standard triggers.
		valid_laamp_basic_trigger = {
			EMPLOYER = root.task_contract_employer
			LAAMP = root.task_contract_taker
		}
	}

	valid_to_keep = {
		# Standard triggers.
		valid_laamp_basic_trigger = {
			EMPLOYER = root.task_contract_employer
			LAAMP = root.task_contract_taker
		}
	}

	valid_to_accept = {
		has_targaryen_exile_story = yes
	}

	on_create = {
		scope:contract = {
			task_contract_employer = {
				add_character_flag = legitimist_supporter
			}
		}
	}

	on_accepted = {
		task_contract_taker = { play_sound_effect = "event:/DLC/EP3/SFX/UI/Contracts/ep3_ui_contracts_accept_contract" }
		save_scope_as = task_contract
		task_contract_employer = {
			save_scope_as = petitioned_ruler
		}
		task_contract_taker = {
			trigger_event = agot_targaryen_exile_invasion.0001
		}
	}

	task_contract_reward = {
		success_standard = {
			effect = {
				task_contract_taker = { play_sound_effect = "event:/DLC/EP3/SFX/UI/Contracts/ep3_ui_contracts_success_on_contract" }
				task_contract_employer = {
					save_scope_as = recipient
				}
				task_contract_taker = {
					custom_tooltip = laamp_legitimist_support_contract_success
				}
			}
		}
		failure_standard = {
			positive = no
			effect = {
				task_contract_taker = { play_sound_effect = "event:/DLC/EP3/SFX/UI/Contracts/ep3_ui_contracts_failure_on_contract" }
				task_contract_taker = {
					custom_tooltip = laamp_legitimist_support_contract_failure
				}
			}
		}
	}
}