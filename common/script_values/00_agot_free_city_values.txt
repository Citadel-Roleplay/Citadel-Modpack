candidate_score_value = { # Irritatingly, we can't just add the votes for an individual character because it would be add = number_of_election_votes = { scope:term_limit_country } and we can't have the two equals
	value = 0
	save_temporary_scope_as = candidate
	scope:term_limit_country = {
		every_elector = {
			save_temporary_scope_as = person
			if = {
				limit = { scope:candidate = { has_election_vote_of = { who = scope:person title = scope:term_limit_country } } }
				add = gold # Since gold is the vote power of each elector, we just add that
			}
		}
	}
}

reverse_gold = {
	value = gold
	multiply = -1
	add = 5000
}

war_vote_declaration = {
	value = 0
	if = { limit = { liege_or_court_owner = { exists = var:vote_triarchy var:vote_triarchy = 1 } } add = 70 }
	if = { limit = { opinion = { target = scope:recipient value = { 0 50 } } } subtract = 10 }
	if = { limit = { opinion = { target = scope:recipient value = { -50 0 } } } add = 10 }
	if = { limit = { opinion = { target = scope:recipient value = { 50 100 } } } subtract = 20 }
	if = { limit = { opinion = { target = scope:recipient value = { -100 -50 } } } add = 20 }
	if = { limit = { opinion = { target = scope:actor value = { 0 50 } } } add = 10 }
	if = { limit = { opinion = { target = scope:actor value = { -50 0 } } } subtract = 10 }
	if = { limit = { opinion = { target = scope:actor value = { 50 100 } } } add = 20 }
	if = { limit = { opinion = { target = scope:actor value = { -100 -50 } } } subtract = 20 }
	if = { limit = { has_trait = brave } add = 10 }
	if = { limit = { has_trait = craven } subtract = 10 }
	if = { limit = { has_trait = ambitious } add = 10 }
	if = { limit = { has_trait = content } subtract = 10 }
	if = { limit = { scope:actor.current_military_strength > scope:recipient.current_military_strength } add = 20 }
	if = { limit = { scope:actor.max_military_strength > scope:recipient.max_military_strength } add = 20 }
	if = { limit = { scope:actor.current_military_strength < scope:recipient.current_military_strength } subtract = 20 }
	if = { limit = { scope:actor.max_military_strength < scope:recipient.max_military_strength } subtract = 20 }
}

total_votes_for = {
	value = 0
	every_in_global_list = {
		variable = all_triarchy_magisters
		add = var:vote_triarchy
	}
}

populist_support_multiplier = {
	root.top_liege = {
		if = {
			limit = { has_realm_law = franchise_democratic_full }
			value = 5
		}
		else_if = {
			limit = { has_realm_law = franchise_lean_democratic }
			value = 2
		}
		else_if = {
			limit = { has_realm_law = franchise_aristocratic_full }
			value = 0.25
		}
		else = {
			value = 1
		}
	}
}

aristocratic_support_multiplier = {
	root.top_liege = {
		if = {
			limit = { has_realm_law = franchise_aristocratic_full }
			value = 5
		}
		else_if = {
			limit = { has_realm_law = franchise_lean_aristocratic }
			value = 2
		}
		else_if = {
			limit = { has_realm_law = franchise_democratic_full }
			value = 0.25
		}
		else = {
			value = 1
		}
	}
}

mercantile_support_multiplier = {
	root.top_liege = {
		if = {
			limit = { has_realm_law = policy_mercantile_full }
			value = 5
		}
		else_if = {
			limit = { has_realm_law = policy_lean_mercantile }
			value = 2
		}
		else_if = {
			limit = { has_realm_law = policy_militaristic_full }
			value = 0.25
		}
		else = {
			value = 1
		}
	}
}

military_support_multiplier = {
	root.top_liege = {
		if = {
			limit = { has_realm_law = policy_militaristic_full }
			value = 5
		}
		else_if = {
			limit = { has_realm_law = policy_lean_militaristic }
			value = 2
		}
		else_if = {
			limit = { has_realm_law = policy_mercantile_full }
			value = 0.25
		}
		else = {
			value = 1
		}
	}
}

free_city_term_length = {
	value = 0

	#Historical Terms
	if = {
		limit = { holder = { has_realm_law = term_length_historical } }
		switch = {
			trigger = this
			title:e_three_daughters = { value = 3 }
			title:k_lys = { value = 4 }
			title:k_myr = { value = 6 }
			title:k_tyrosh = { value = 9 }
			title:k_braavos = { value = -1 }
			title:k_pentos = { value = -1 }
			fallback = { value = 5 } # If you somehow get the historical law and weren't supposed to; fallback to 5
		}
	}
	#Short Terms
	if = {
		limit = { holder = { has_realm_law = term_length_short } }
		value = 5
	}
	#Long Terms
	if = {
		limit = { holder = { has_realm_law = term_length_long } }
		value = 10
	}
	#Life Terms
	if = {
		limit = {
			holder = { has_realm_law = term_length_life }
		}
		value = -1
	}
	# Delayed Due to War
	else_if = {
		limit = { holder = { has_character_flag = election_delayed_till_war_ends } }
		value = -2
	}
	#Dictatorship
	else_if = {
		limit = {
			has_title_law = dictatorship_succession_law
		}
		value = -3
	}
}

free_city_election_progress = {
	value = var:years_since_election
	divide = free_city_term_length  # Calculate the progress towards the term length
	multiply = 100  # To get the percentage
}

free_city_election_progress_loc = {
	value = free_city_term_length
	subtract = var:years_since_election
}