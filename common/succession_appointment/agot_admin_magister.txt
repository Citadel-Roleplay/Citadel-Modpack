admin_magister = {
	default_candidates = { landed_vassal unlanded_noble_house_head }

	allow_children = no

	candidate_score = {
		### Universal Factors

		add = {
			value = {
				add = diplomacy
				add = learning
				add = martial
				add = intrigue
				add = stewardship
				multiply = 2
			}
			desc = sum_of_skills_desc
		}

		if = {
			limit = { has_trait = clubfooted }
			subtract = {
				value = 15
				desc = trait_clubfooted
			}
		}
		if = {
			limit = { has_trait = dwarf }
			subtract = {
				value = 15
				desc = trait_dwarf
			}
		}
		if = {
			limit = { has_trait = hunchbacked }
			subtract = {
				value = 15
				desc = trait_hunchbacked
			}
		}
		if = {
			limit = { has_trait = lisping }
			subtract = {
				value = 20
				desc = trait_lisping
			}
		}
		if = {
			limit = {
				OR = {
					has_trait = inbred
					has_trait = spindly
					has_trait = scaly
					has_trait = albino
					has_trait = wheezing
					has_trait = bleeder
					has_trait = infirm
				}
			}
			subtract = {
				value = 50
				desc = negative_trait_succession
			}
		}
		if = {
			limit = { has_trait = gallivanter }
			subtract = {
				value = 1000
				desc = trait_gallivanter
			}
		}
		if = {
			limit = {
				has_trait = deviant
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = deviant FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "deviant_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = incestuous
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = incestuous FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "incestuous_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = sodomite
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = sodomite FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "sodomite_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = cannibal
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = cannibal FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "cannibal_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = kinslayer_1
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = kinslayer_1 FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "kinslayer_1_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = kinslayer_2
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = kinslayer_2 FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "kinslayer_2_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = kinslayer_3
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = kinslayer_3 FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "kinslayer_3_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = witch
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = witch FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "witch_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = adulterer
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = adulterer FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "adulterer_and_criminal_desc"
			}
		}
		if = {
			limit = {
				has_trait = fornicator
				exists = top_liege.primary_title.title_capital_county.faith
				trait_is_criminal_in_faith_trigger = { TRAIT = fornicator FAITH = top_liege.primary_title.title_capital_county.faith GENDER_CHARACTER = root }
			}
			add = {
				value = -20
				desc = "fornicator_and_criminal_desc"
			}
		}

		if = {
			limit = {
				top_liege ?= {
					legitimacy_level >= 3
					any_councillor ?= { this = root }
				}
			}
			add = {
				value = 20
			}
		}
		else_if = {
			limit = {
				top_liege ?= {
					any_councillor ?= { this = root }
				}
			}
			add = {
				value = 10
			}
		}

		# Removed State Faiths; It's rude as fuck because it doesn't mention state faith anywhere.
		# if = {
		# 	limit = {
		# 		top_liege.primary_title.title_capital_county.faith ?= {
		# 			NOT = { this = root.faith }
		# 			faith_hostility_level = {
		# 				target = root.faith
		# 				value = faith_fully_accepted_level
		# 			}
		# 		}
		# 	} #Change to faith acceptance
		# 	subtract = {
		# 		value = 5
		# 		desc = accepted_faith_succession_desc
		# 	}
		# }
		# else_if = {
		# 	limit = {
		# 		top_liege.primary_title.title_capital_county.faith ?= {
		# 			faith_hostility_level = {
		# 				target = root.faith
		# 				value = faith_astray_level
		# 			}
		# 		}
		# 	} #Change to faith acceptance
		# 	subtract = {
		# 		value = 20
		# 		desc = astray_faith_succession_desc
		# 	}
		# }
		# else_if = {
		# 	limit = {
		# 		top_liege.primary_title.title_capital_county.faith ?= {
		# 			faith_hostility_level = {
		# 				target = root.faith
		# 				value = faith_hostile_level
		# 			}
		# 		}
		# 	} #Change to faith acceptance
		# 	subtract = {
		# 		value = 50
		# 		desc = hostile_faith_succession_desc
		# 	}
		# }
		# else_if = {
		# 	limit = {
		# 		top_liege.primary_title.title_capital_county.faith ?= {
		# 			faith_hostility_level = {
		# 				target = root.faith
		# 				value >= faith_evil_level
		# 			}
		# 		}
		# 	} #Change to faith acceptance
		# 	subtract = {
		# 		value = 100
		# 		desc = evil_faith_sucession_desc
		# 	}
		# }

		if = {
			limit = {
				root.top_liege.capital_county.culture ?= {
					NOT = { this = root.culture }
					cultural_acceptance = {
						target = root.culture
						value = 0
					}
				}
			}
			subtract = {
				value = 100
				desc = no_cultural_acceptance
			}
		}
		else_if = {
			limit = {
				root.top_liege.capital_county.culture ?= {
					NOT = { this = root.culture }
					cultural_acceptance = {
						target = root.culture
						value <= 20
					}
				}
			}
			subtract = {
				value = 75
				desc = terrible_cultural_acceptance
			}
		}
		else_if = {
			limit = {
				root.top_liege.capital_county.culture ?= {
					NOT = { this = root.culture }
					cultural_acceptance = {
						target = root.culture
						value <= 40
					}
				}
			}
			subtract = {
				value = 60
				desc = poor_cultural_acceptance
			}
		}
		else_if = {
			limit = {
				root.top_liege.capital_county.culture ?= {
					NOT = { this = root.culture }
					cultural_acceptance = {
						target = root.culture
						value <= 60
					}
				}
			}
			subtract = {
				value = 45
				desc = mediocre_cultural_acceptance
			}
		}
		else_if = {
			limit = {
				root.top_liege.capital_county.culture ?= {
					NOT = { this = root.culture }
					cultural_acceptance = {
						target = root.culture
						value <= 80
					}
				}
			}
			subtract = {
				value = 30
				desc = accepted_foreign_culture
			}
		}

		if = {
			limit = {
				is_close_family_of = scope:title.holder
			}
			add = {
				value = -2000
				desc = imperial_close_family_desc
			}
		}

		# SCHEMES
		if = {
			limit = {
				has_character_modifier = scheme_slandered_modifier
			}
			add = {
				value = slander_acclamation_score_value
				desc = scheme_slandered_modifier
			}
		}
		if = {
			limit = {
				has_character_modifier = scheme_promoted_modifier
			}
			add = {
				value = promote_acclamation_score_value # Keep this balanced if more values are added!
				desc = scheme_promoted_modifier
			}
		}

		### Aristocratic support
		add = {
			value = {
				add = {
					value = intrigue
					multiply = 2
				}
				add = {
					value = influence_level
					subtract = 2
					multiply = 10
				}
				if = {
					limit = {is_lowborn = no}
					add = {
						value = dynasty.dynasty_prestige_level
						subtract = 3
						multiply = 10
					}
				}
				multiply = aristocratic_support_multiplier # Factor
			}
			desc = election_aristocratic_support_desc
		}

		### Mercantile support
		add = {
			value = {
				add = {
					value = stewardship
					multiply = 2
				}
				multiply = mercantile_support_multiplier # Factor
			}
			desc = election_mercantile_support_desc
		}

		### Populist support
		add = {
			value = {
				add = {
					value = diplomacy
					multiply = 2
				}
				if = {
					limit = { is_landed = yes }
					add = {
						value = {
							value = capital_county.county_holder_opinion
							multiply = 0.5
						}
					}
				}
				add = {
					value = prestige_level
					subtract = 2
					multiply = 15
				}
				multiply = populist_support_multiplier # Factor
			}
			desc = election_populist_support_desc
		}

		### Priestly support
		add = {
			value = {
				add = {
					value = learning
					multiply = 2
				}
				add = {
					value = piety_level
					subtract = 2
					multiply = 15
				}
				multiply = 1 # Factor
			}
			desc = election_priestly_support_desc
		}

		### Military support
		add = {
			value = {
				add = {
					value = martial
					multiply = 2
				}
				multiply = military_support_multiplier # Factor
			}
			desc = election_military_support_desc
		}

		# ADJUST BASED ON GENDER LAW - MUST GO AT THE END
		save_temporary_value_as = pre_gender_law_calc
		if = { # If the temp value is negative, flip it for the coming calculations
			limit = { scope:pre_gender_law_calc < 0 }
			if = {
				limit = {
					scope:title.holder = {
						has_realm_law = male_preference_law
					}
					is_female = yes
				}
				subtract = {
					value = scope:pre_gender_law_calc
					multiply = -1
					multiply = 0.5
					desc = male_preference_law
				}
			}
			else_if = {
				limit = {
					scope:title.holder = {
						has_realm_law = male_only_law
					}
					is_female = yes
				}
				multiply = {
					value = 0
					desc = male_only_law
				}
			}
			else_if = {
				limit = {
					scope:title.holder = {
						has_realm_law = female_preference_law
					}
					is_female = no
				}
				subtract = {
					value = scope:pre_gender_law_calc
					multiply = -1
					multiply = 0.5
					desc = female_only_law
				}
			}
			else_if = {
				limit = {
					scope:title.holder = {
						has_realm_law = female_only_law
					}
					is_female = no
				}
				multiply = {
					value = 0
					desc = female_only_law
				}
			}
		}
		else = {
			if = {
				limit = {
					scope:title.holder = {
						has_realm_law = male_preference_law
					}
					is_female = yes
				}
				subtract = {
					value = scope:pre_gender_law_calc
					multiply = 0.5
					desc = male_preference_law
				}
			}
			else_if = {
				limit = {
					scope:title.holder = {
						has_realm_law = male_only_law
					}
					is_female = yes
				}
				multiply = {
					value = 0
					desc = male_only_law
				}
			}
			else_if = {
				limit = {
					scope:title.holder = {
						has_realm_law = female_preference_law
					}
					is_female = no
				}
				subtract = {
					value = scope:pre_gender_law_calc
					multiply = 0.5
					desc = female_only_law
				}
			}
			else_if = {
				limit = {
					scope:title.holder = {
						has_realm_law = female_only_law
					}
					is_female = no
				}
				multiply = {
					value = 0
					desc = female_only_law
				}
			}
		}

		# ROUND THE NUMBER
		divide = 1
		ceiling = yes
		multiply = 1
	}
}