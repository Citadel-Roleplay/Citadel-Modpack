asoiaf_headgear_crowns = {

	usage = game
	selection_behavior = weighted_random
	priority = 5

	asoiaf_aerys_II_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = asoiaf_crowns
				accessory = male_headgear_secular_asoiaf_crown_aerys_II
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 300
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = asoiaf_aerys_II_crown_artefact }
			}
			modifier = {
				add = 300
				NOT = {
					any_equipped_character_artifact = { artifact_slot_type = helmet }
				}
				AND = {
					agot_default_wear_crown_trigger = yes
					exists = character:Targaryen_1 #Aerys II Targaryen
					this = character:Targaryen_1 # Aerys II
				}
				has_game_rule = asoiaf_new_dnas_valyrian_rule_on #replace with valyrian clothes rule once you've got actual outfits to trigger alongside it
			}
			modifier = { #for when Aerys is dead in later bookmarks
				add = 240
				this = character:Targaryen_1 # Aerys II
				character:Targaryen_1 = {
					is_alive = no
					agot_default_wear_crown_trigger = yes
				}
				has_game_rule = asoiaf_new_dnas_valyrian_rule_on #replace with valyrian clothes rule once you've got actual outfits to trigger alongside it
			}
			modifier = { #for when Stannis is dead or temporarily loses his crown (don't want the vanilla AGOT one showing up randomly)
				add = 300
				AND = {
					OR = {
						NOT = {
							any_equipped_character_artifact = { artifact_slot_type = helmet }
						}
						is_alive = no
					}
					OR = {
						primary_title.tier = tier_empire
						AND = {
							primary_title.tier = tier_kingdom
							agot_is_independent_ruler = yes
						}
						primary_spouse ?= {
							primary_title.tier = tier_empire
						}
						primary_spouse ?= {
							primary_title.tier = tier_kingdom
							agot_is_independent_ruler = yes
						}
					}
					AND = {
						this = character:Baratheon_3 #Stannis Baratheon (son of Steffon)
						religion = religion:the_rhllor_religion
						agot_default_wear_crown_trigger = yes
					}
				}
			}
			modifier = {
				factor = 0
				NOT =  { is_agot_plus_loaded_trigger = yes }
			}
		}
	}
	asoiaf_robert_I_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = asoiaf_crowns
				accessory = male_headgear_secular_asoiaf_crown_robert_I
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 300
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = asoiaf_robert_I_crown_artefact }
			}
			modifier = { #for when Robert is dead in later bookmarks
				add = 280
				exists = character:Baratheon_2 #Robert I Baratheon
				this = character:Baratheon_2
				character:Baratheon_2 = {
					is_alive = no
					agot_default_wear_crown_trigger = yes
				}
				has_game_rule = asoiaf_new_dnas_stormlands_rule_on #replace with stormlands clothes rule once you've got actual outfits to trigger alongside it
			}
			modifier = {
				add = -1000
				NOT = { agot_has_artifact_equipped = { ARTIFACT_VARIABLE = asoiaf_robert_I_crown_artefact } }
				any_equipped_character_artifact = {
					artifact_slot_type = helmet
				}
			}
			modifier = { #generic crown when no artefact is equipped
				add = 250
				NOT = { agot_has_artifact_equipped = { ARTIFACT_VARIABLE = asoiaf_robert_I_crown_artefact } }
				agot_default_wear_crown_trigger = yes
				NOT = { has_government = nights_watch_government } #for some reason this is not included in the agot_default_wear_crown_trigger
				OR = {
					dynasty ?= dynasty:dynn_Baratheon
					culture = culture:stormlander
				}
				has_game_rule = asoiaf_new_dnas_stormlands_rule_on #replace with stormlands clothes rule once you've got actual outfits to trigger alongside it
			}
			modifier = {
				factor = 0
				NOT =  { is_agot_plus_loaded_trigger = yes }
			}
		}
	}
	asoiaf_crown_baratheon_tyrell = { #only appears for SPOUSES of monarchs
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = asoiaf_crowns
				accessory = male_headgear_secular_asoiaf_crown_baratheon_tyrell
			}
		}
		weight = {
			base = 0
			modifier = {
				add = -1000
				any_equipped_character_artifact = {
					artifact_slot_type = helmet
				}
			}
			modifier = {
				add = 250
				OR = {
					AND = { #Tyrell married to Baratheon/Durrandon monarch
						dynasty ?= dynasty:dynn_Tyrell
						OR = {
							primary_spouse.dynasty ?= dynasty:dynn_Baratheon
							primary_spouse.dynasty ?= dynasty:dynn_Durrandon
						}
						OR = {
							primary_spouse ?= {
								agot_default_wear_crown_trigger = yes
							}
							primary_spouse ?= {
								agot_default_wear_crown_trigger = yes
								agot_is_independent_ruler = yes
							}
						}
					}
					AND = { #Baratheon married to Tyrell monarch
						OR = {
							dynasty ?= dynasty:dynn_Baratheon
							dynasty ?= dynasty:dynn_Durrandon
						}
						primary_spouse.dynasty ?= dynasty:dynn_Tyrell
						OR = {
							primary_spouse ?= {
								agot_default_wear_crown_trigger = yes
							}
							primary_spouse ?= {
								agot_default_wear_crown_trigger = yes
								agot_is_independent_ruler = yes
							}
						}
					}
				}
				has_game_rule = asoiaf_new_dnas_reach_rule_on #replace with reach clothes rule once you've got actual outfits to trigger alongside it
			}
			modifier = {
				factor = 0
				NOT =  { is_agot_plus_loaded_trigger = yes }
			}
		}
	}
	asoiaf_joffrey_I_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = asoiaf_crowns
				accessory = male_headgear_secular_asoiaf_crown_joffrey_I
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 300
				agot_has_artifact_equipped = { ARTIFACT_VARIABLE = joffreyI_crown_artifact }
				has_game_rule = asoiaf_new_clothes_crownlands_rule_on
			}
			modifier = {
				add = 280
				NOT = { agot_has_artifact_equipped = { ARTIFACT_VARIABLE = joffreyI_crown_artifact } }
				agot_default_wear_crown_trigger = yes
				dynasty ?= dynasty:dynn_Baratheon
				OR = {
					is_character_baratheon_5 = yes
					is_character_baratheon_6 = yes
					is_character_baratheon_7 = yes
					AND = {
						has_inactive_trait = gold_hair
						has_inactive_trait = emerald_eyes
					}
				}
				has_game_rule = asoiaf_new_clothes_crownlands_rule_on
			}
			modifier = {
				add = -1000
				NOT = { agot_has_artifact_equipped = { ARTIFACT_VARIABLE = joffreyI_crown_artifact } }
				any_equipped_character_artifact = {
					artifact_slot_type = helmet
				}
				has_game_rule = asoiaf_new_clothes_crownlands_rule_on
			}
			modifier = {
				factor = 0
				NOT =  { is_agot_plus_loaded_trigger = yes }
			}
		}
	}
}