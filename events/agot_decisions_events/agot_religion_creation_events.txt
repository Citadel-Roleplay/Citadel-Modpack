namespace = religion_creation_decision

#Riverlander Old Gods
religion_creation_decision.0100 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				religion = religion:the_pact_religion
				capital_province ?= { geographical_region = world_westeros_the_riverlands }
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			agot_found_religion_convert_family_effect = yes
		}
		every_county_in_region = {
			region = world_westeros_the_riverlands
			limit = {
				religion = religion:the_pact_religion
				OR = {
					holder = root
					holder = { is_ai = yes }
				}
			}
			if = {
				limit = {
					OR = {
						holder = root
						holder = {
							any_liege_or_above = { this = root }
						}
					}
				}
				set_county_faith = faith:old_gods_rnh
			}
			else = {
				random = {
					chance = 50
					set_county_faith = faith:old_gods_rnh
				}
			}
		}
		every_county_in_region = {
			region = world_westeros_the_riverlands
			limit = {
				holder.religion = religion:the_pact_religion
					holder = { is_ai = yes }
			}
			if = {
				limit = {
					holder = {
						any_liege_or_above = { this = root }
					}
				}
				holder = { agot_found_religion_convert_family_effect = yes }
			}
			else = {
				random = {
					chance = 50
					holder = { agot_found_religion_convert_family_effect = yes }
				}
			}
		}
	}
}

#Dornish Old Gods
religion_creation_decision.0200 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				religion = religion:the_pact_religion
				capital_province ?= { geographical_region = world_westeros_dorne }
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			agot_found_religion_convert_family_effect = yes
		}
		every_county_in_region = {
			region = world_westeros_dorne
			limit = {
				religion = religion:the_pact_religion
				OR = {
					holder = root
					holder = { is_ai = yes }
				}
			}
			if = {
				limit = {
					OR = {
						holder = root
						holder = {
							any_liege_or_above = { this = root }
						}
					}
				}
				set_county_faith = faith:old_gods_dns
			}
			else = {
				random = {
					chance = 50
					set_county_faith = faith:old_gods_dns
				}
			}
		}
		every_county_in_region = {
			region = world_westeros_dorne
			limit = {
				holder.religion = religion:the_pact_religion
					holder = { is_ai = yes }
			}
			if = {
				limit = {
					holder = {
						any_liege_or_above = { this = root }
					}
				}
				holder = { agot_found_religion_convert_family_effect = yes }
			}
			else = {
				random = {
					chance = 50
					holder = { agot_found_religion_convert_family_effect = yes }
				}
			}
		}
	}
}

#Crownlander Old Gods
religion_creation_decision.0300 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				religion = religion:the_pact_religion
				capital_province ?= { geographical_region = world_westeros_the_crownlands }
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			agot_found_religion_convert_family_effect = yes
		}
		every_county_in_region = {
			region = world_westeros_the_crownlands
			limit = {
				religion = religion:the_pact_religion
				OR = {
					holder = root
					holder = { is_ai = yes }
				}
			}
			if = {
				limit = {
					OR = {
						holder = root
						holder = {
							any_liege_or_above = { this = root }
						}
					}
				}
				set_county_faith = faith:old_gods_sns
			}
			else = {
				random = {
					chance = 50
					set_county_faith = faith:old_gods_sns
				}
			}
		}
		every_county_in_region = {
			region = world_westeros_the_crownlands
			limit = {
				holder.religion = religion:the_pact_religion
					holder = { is_ai = yes }
			}
			if = {
				limit = {
					holder = {
						any_liege_or_above = { this = root }
					}
				}
				holder = { agot_found_religion_convert_family_effect = yes }
			}
			else = {
				random = {
					chance = 50
					holder = { agot_found_religion_convert_family_effect = yes }
				}
			}
		}
	}
}

#Reach Old Gods
religion_creation_decision.0400 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				religion = religion:the_pact_religion
				capital_province ?= { geographical_region = world_westeros_the_reach }
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			agot_found_religion_convert_family_effect = yes
		}
		every_county_in_region = {
			region = world_westeros_the_reach
			limit = {
				religion = religion:the_pact_religion
				OR = {
					holder = root
					holder = { is_ai = yes }
				}
			}
			if = {
				limit = {
					OR = {
						holder = root
						holder = {
							any_liege_or_above = { this = root }
						}
					}
				}
				set_county_faith = faith:old_gods_fng
			}
			else = {
				random = {
					chance = 50
					set_county_faith = faith:old_gods_fng
				}
			}
		}
		every_county_in_region = {
			region = world_westeros_the_reach
			limit = {
				holder.religion = religion:the_pact_religion
					holder = { is_ai = yes }
			}
			if = {
				limit = {
					holder = {
						any_liege_or_above = { this = root }
					}
				}
				holder = { agot_found_religion_convert_family_effect = yes }
			}
			else = {
				random = {
					chance = 50
					holder = { agot_found_religion_convert_family_effect = yes }
				}
			}
		}
	}
}

#Stormlannder Old Gods
religion_creation_decision.0500 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				religion = religion:the_pact_religion
				capital_province ?= { geographical_region = world_westeros_the_stormlands }
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			agot_found_religion_convert_family_effect = yes
		}
		every_county_in_region = {
			region = world_westeros_the_stormlands
			limit = {
				religion = religion:the_pact_religion
				OR = {
					holder = root
					holder = { is_ai = yes }
				}
			}
			if = {
				limit = {
					OR = {
						holder = root
						holder = {
							any_liege_or_above = { this = root }
						}
					}
				}
				set_county_faith = faith:old_gods_snw
			}
			else = {
				random = {
					chance = 50
					set_county_faith = faith:old_gods_snw
				}
			}
		}
		every_county_in_region = {
			region = world_westeros_the_stormlands
			limit = {
				holder.religion = religion:the_pact_religion
					holder = { is_ai = yes }
			}
			if = {
				limit = {
					holder = {
						any_liege_or_above = { this = root }
					}
				}
				holder = { agot_found_religion_convert_family_effect = yes }
			}
			else = {
				random = {
					chance = 50
					holder = { agot_found_religion_convert_family_effect = yes }
				}
			}
		}
	}
}

#Vale Old Gods
religion_creation_decision.0600 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				religion = religion:the_pact_religion
				capital_province ?= { geographical_region = world_westeros_the_vale }
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			agot_found_religion_convert_family_effect = yes
		}
		every_county_in_region = {
			region = world_westeros_the_vale
			limit = {
				religion = religion:the_pact_religion
				OR = {
					holder = root
					holder = { is_ai = yes }
				}
			}
			if = {
				limit = {
					OR = {
						holder = root
						holder = {
							any_liege_or_above = { this = root }
						}
					}
				}
				set_county_faith = faith:old_gods_mnv
			}
			else = {
				random = {
					chance = 50
					set_county_faith = faith:old_gods_mnv
				}
			}
		}
		every_county_in_region = {
			region = world_westeros_the_vale
			limit = {
				holder.religion = religion:the_pact_religion
					holder = { is_ai = yes }
			}
			if = {
				limit = {
					holder = {
						any_liege_or_above = { this = root }
					}
				}
				holder = { agot_found_religion_convert_family_effect = yes }
			}
			else = {
				random = {
					chance = 50
					holder = { agot_found_religion_convert_family_effect = yes }
				}
			}
		}
	}
}

#Westerlands Old Gods
religion_creation_decision.0700 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				religion = religion:the_pact_religion
				capital_province ?= { geographical_region = world_westeros_the_westerlands }
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			agot_found_religion_convert_family_effect = yes
		}
		every_county_in_region = {
			region = world_westeros_the_westerlands
			limit = {
				religion = religion:the_pact_religion
				OR = {
					holder = root
					holder = { is_ai = yes }
				}
			}
			if = {
				limit = {
					OR = {
						holder = root
						holder = {
							any_liege_or_above = { this = root }
						}
					}
				}
				set_county_faith = faith:old_gods_rng
			}
			else = {
				random = {
					chance = 50
					set_county_faith = faith:old_gods_rng
				}
			}
		}
		every_county_in_region = {
			region = world_westeros_the_westerlands
			limit = {
				holder.religion = religion:the_pact_religion
					holder = { is_ai = yes }
			}
			if = {
				limit = {
					holder = {
						any_liege_or_above = { this = root }
					}
				}
				holder = { agot_found_religion_convert_family_effect = yes }
			}
			else = {
				random = {
					chance = 50
					holder = { agot_found_religion_convert_family_effect = yes }
				}
			}
		}
	}
}

#Westerosi Rooloo
religion_creation_decision.0800 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				religion = religion:the_rhllor_religion
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			agot_found_religion_convert_family_effect = yes
		}
	}
}

#FotS Dragon
religion_creation_decision.0900 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_vassal_or_below = {
			limit = {
				OR = {
					religion = religion:the_seven_religion
					religion = religion:the_flames_religion
				}
				is_ai = yes
			}
			if = {
				limit = {
					religion = religion:the_seven_religion
					OR = {
						culture = culture:high_valyrian
						has_trait = dragonrider
					}
				}
				agot_found_religion_convert_family_effect = yes
			}
			else_if = {
				limit = {
					religion = religion:the_flames_religion
					capital_province ?= { religion = religion:the_seven_religion }
				}
				agot_found_religion_convert_family_effect = yes
			}
		}
	}
}

#FotS Sword
religion_creation_decision.1000 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_held_county = {
			limit = {
				religion = religion:the_seven_religion
				NOT = { faith = faith:fots_oldnew }
				NOT = { faith = faith:fots_sands }
			}
			set_county_faith = faith:fots_sword
		}
		every_vassal_or_below = {
			limit = {
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			if = {
				limit = {
					religion = religion:the_seven_religion
					NOT = { faith = faith:fots_oldnew }
					NOT = { faith = faith:fots_sands }
				}
				agot_found_religion_convert_family_effect = yes
			}
			every_held_county = {
				limit = {
					religion = religion:the_seven_religion
					NOT = { faith = faith:fots_oldnew }
					NOT = { faith = faith:fots_sands }
				}
				set_county_faith = faith:fots_sword
			}
		}
		every_ruler ={
			limit = {
				religion = religion:the_seven_religion
				NOT = { any_held_title = { is_head_of_faith = yes } }
				NOT = { faith = faith:fots_oldnew }
				NOT = { faith = faith:fots_sands }
				has_trait = zealous
				is_ai = yes
				capital_province ?= { geographical_region = world_westeros_seven_kingdoms_without_wall }
			}
			random = {
				chance = 60
				agot_found_religion_convert_family_effect = yes
				every_held_county = {
					limit = {
						religion = religion:the_seven_religion
						NOT = { faith = faith:fots_oldnew }
						NOT = { faith = faith:fots_sands }
					}
					set_county_faith = faith:fots_sword
				}
			}
		}
	}
}

#Dornish FotS
religion_creation_decision.1100 = {
	hidden = yes

	immediate = {
		save_scope_as = actor
		agot_found_religion_convert_family_effect = yes
		every_held_county = {
			limit = { religion = religion:the_seven_religion }
			set_county_faith = faith:fots_sands
		}
		every_vassal_or_below = {
			limit = {
				is_ai = yes
				NOT = { any_held_title = { is_head_of_faith = yes } }
			}
			if = {
				limit = { religion = religion:the_seven_religion }
				agot_found_religion_convert_family_effect = yes
			}
			every_held_county = {
				limit = { religion = religion:the_seven_religion }
				set_county_faith = faith:fots_sands
			}
		}
	}
}