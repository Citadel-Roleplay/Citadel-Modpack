namespace = agot_titans_march

#Baelor Start Event
agot_titans_march.0001 = {
	type = character_event
	title = agot_titans_march.0001.t
	desc = agot_titans_march.0001.desc

	theme = bastardy
	override_background = {
		reference = bedchamber
	}
	left_portrait = {
		character = root
		animation = stress
	}
	right_portrait = {
		character = character:Targaryen_83
		animation = newborn
	}

	immediate = {
		character:Targaryen_83 = { save_scope_as = daena }
		character:Targaryen_94 = { save_scope_as = daemon }
		add_stress = massive_stress_gain
	}

	option = {
		name = agot_titans_march.0001.a

		trait = inappetetic
		add_character_modifier = {
			modifier = stress_inappetetic_hunger_2
			years = 3
		}
		add_stress = medium_stress_loss

		hidden_effect = {
			random_list = {
				0 = {
					modifier = {
						add = agot_historic_outcome_2
					}
					trigger_event = {
						id = agot_titans_march.0100
						days = 40
					}
				}
				0 = {
					modifier = {
						add = agot_nonhistoric_outcome_2
					}
				}
			}
		}

		ai_chance = {
			base = 0
			modifier = {
				add = agot_historic_outcome_3
			}
		}
	}

	option = {
		name = agot_titans_march.0001.b

		ai_chance = {
			base = 0
			modifier = {
				add = agot_nonhistoric_outcome_3
			}
		}
	}

	option = {
		name = agot_titans_march.0001.c

		add_stress = monumental_stress_gain
		every_prisoner = {
			limit = {
				has_character_modifier = locked_in_maidenvault
			}
			release_from_prison = yes
		}

		ai_chance = {
			base = 0
			modifier = {
				add = agot_nonhistoric_outcome_3
			}
		}
	}
}

agot_titans_march.0100 = { #Baelor's Heir
	title = agot_titans_march.0100.t
	desc = agot_titans_march.0100.desc
	theme = dynasty

	override_background = {
		reference = agot_iron_throne
	}

	immediate = {
		hidden_effect = {
			character:Targaryen_78 = { save_scope_as = egg3 }
			character:Targaryen_79 = { save_scope_as = viserys }
			character:Targaryen_83 = { save_scope_as = daena }
			character:Targaryen_84 = { save_scope_as = rhaena }
			character:Targaryen_85 = { save_scope_as = elaena }
		}
		character:Targaryen_84 = {
			add_character_flag = {
				flag = in_grand_council
				days = 1
			}
		}
		every_prisoner = {
			limit = {
				has_character_modifier = locked_in_maidenvault
			}
			release_from_prison = yes
		}
	}

	left_portrait = {
		character = root
		animation = dead
	}
	right_portrait = {
		character = character:Targaryen_79
		animation = personality_honorable
	}
	lower_left_portrait = {
		character = character:Targaryen_83
	}
	lower_center_portrait = {
		character = character:Targaryen_84
	}
	lower_right_portrait = {
		character = character:Targaryen_85
	}
	option = {
		name = agot_titans_march.0100.a
		flavor = agot_titans_march.0100.a.flavor
		trigger = {
			character:Targaryen_83 = { is_alive = yes }
		}
		death = {
			death_reason = death_malnourishment
		}
		ai_chance = {
			base = 0 # Outcome Weight
			modifier = { add = agot_nonhistoric_outcome_4 }
		}
	}
	option = {
		name = agot_titans_march.0100.b
		flavor = agot_titans_march.0100.b.flavor
		trigger = {
			character:Targaryen_84 = { is_alive = yes }
		}
		character:Targaryen_83 = { add_trait = disinherited }
		set_designated_heir_unsafe = character:Targaryen_84
		death = {
			death_reason = death_malnourishment
		}
		ai_chance = {
			base = 0 # Outcome Weight
			modifier = { add = agot_nonhistoric_outcome_4 }
		}
	}
	option = {
		name = agot_titans_march.0100.c
		flavor = agot_titans_march.0100.c.flavor
		trigger = {
			character:Targaryen_85 = { is_alive = yes }
		}
		set_designated_heir_unsafe = character:Targaryen_85
		character:Targaryen_83 = { add_trait = disinherited }
		character:Targaryen_84 = { add_trait = septon }
		death = {
			death_reason = death_malnourishment
		}
		ai_chance = {
			base = 0 # Outcome Weight
			modifier = { add = agot_nonhistoric_outcome_4 }
		}
	}
	option = {
		name = agot_titans_march.0100.d
		flavor = agot_titans_march.0100.d.flavor
		trigger = {
			character:Targaryen_79 = { is_alive = yes }
		}
		set_designated_heir_unsafe = character:Targaryen_79
		death = {
			death_reason = death_malnourishment
		}
		ai_chance = {
			base = 0 # Outcome Weight
			modifier = { add = agot_historic_outcome_4 }
		}
	}

	after = {
		character:Targaryen_84 = {
			remove_character_flag = in_grand_council
			trigger_event = agot_titans_march.0201
		}
	}
}

#Girls Leave Prison
agot_titans_march.0200 = {
	hidden = yes

	immediate = {
		if = {
			limit = {
				is_imprisoned = yes
				imprisoner = { is_ai = yes }
			}
			release_from_prison = yes
		}
	}
}

#Rhaena Septa
agot_titans_march.0201 = {
	hidden = yes

	immediate = {
		if = {
			limit = {
				is_ai = yes
				is_married = no
				is_betrothed = no
				is_ruler = no
			}
			random_list = {
				0 = {
					modifier = {
						add = agot_historic_outcome_2
					}
					add_trait = septon
				}
				0 = {
					modifier = {
						add = agot_nonhistoric_outcome_2
					}
				}
			}
		}
	}
}

#Daena Escapes, LAAMP
agot_titans_march.0300 = {
	hidden = yes

	trigger = {
		is_ai = yes
		is_imprisoned = yes
	}

	immediate = {
		imprisoner = { save_scope_as = imprisoner }
		escape_from_prison_effect = yes
		move_to_pool_at = title:c_braavos.holder.capital_province
		add_character_flag = {
			flag = block_laamp_starting_event
			weeks = 52
		}
		if = {
			limit = {
				character:Targaryen_94 = {
					is_alive = yes
				}
			}
			if = {
				limit = {
					character:Targaryen_94 = {
						is_imprisoned = yes
					}
				}
				escape_from_prison_effect = yes
			}
			move_to_pool_at = title:c_braavos.holder.capital_province
		}
		character:Targaryen_82 = { trigger_event = agot_titans_march.0301 }
	}
}

#Baelor Reaction
agot_titans_march.0301 = {
	type = character_event
	title = agot_titans_march.0301.t
	desc = agot_titans_march.0301.desc

	theme = mental_break
	left_portrait = {
		character = root
		animation = stress
	}
	right_portrait = {
		character = character:Targaryen_83
		animation = personality_bold
	}
	lower_right_portrait = {
		character = character:Targaryen_94
		trigger = {
			character:Targaryen_94 = { is_alive = yes }
		}
	}

	immediate = {
		character:Targaryen_83 = { save_scope_as = daena }
		character:Targaryen_94 = { save_scope_as = daemon }
		add_stress = massive_stress_gain

		scope:daena = {
			create_landless_adventurer_title_effect = {
				REASON = flag:runaway_forbidden
				FLAVOR_CHAR = root
			}
			every_relation = {
				type = ward
				limit = {
					NOT = { this = character:Targaryen_94 }
				}
				save_scope_as = ward
				remove_guardian_effect = {
					GUARDIAN = prev
					WARD = scope:ward
					RETURN_WARD = no
					HIDE_OPINION = no
				}
			}
			add_trait = disinherited
		}

		hidden_effect = {
			scope:daena = {
				populate_location_with_contracts_effect = {
					AREA_CHAR = scope:daena
					AMOUNT = 3
				}
				if = {
					limit = {
						character:Targaryen_94 = {
							is_alive = yes
						}
					}
					add_courtier = character:Targaryen_94
				}
			}
		}
	}

	option = {
		trigger = {
			is_ai = no
			scope:daena = { is_playable_character = yes } # For Safety
		}
		name = agot_titans_march.0301.a
		set_player_character = scope:daena
		scope:daena = { trigger_event = agot_titans_march.0302 }
	}

	option = {
		name = agot_titans_march.0301.b
		inappetetic_advance_starvation_effect = yes
		add_stress = medium_stress_loss
	}

	option = {
		name = agot_titans_march.0301.c
	}
}

#Daena Start Event
agot_titans_march.0302 = {
	type = character_event
	title = agot_titans_march.0302.t
	desc = agot_titans_march.0302.desc

	theme = realm
	left_portrait = {
		character = character:Targaryen_83
		animation = personality_bold
	}
	lower_right_portrait = {
		character = character:Targaryen_94
		trigger = {
			character:Targaryen_94 = { is_alive = yes }
		}
	}

	immediate = {
		character:Targaryen_94 = { save_scope_as = daemon }
	}

	option = {
		name = agot_titans_march.0302.a
	}
}

#Setup Sept of Baelor Completion
agot_titans_march.0400 = {
	hidden = yes

	immediate = {
		if = {
			limit = {
				title:c_kings_landing.holder = character:Targaryen_82
			}
			character:Targaryen_82 = {
				trigger_event = agot_titans_march.0401
			}
		}
		else = {
			title:c_kings_landing.holder = {
				trigger_event = agot_titans_march.0402
			}
		}
	}
}

#Sept of Baelor finished as Baelor
agot_titans_march.0401 = {
	type = character_event
	title = agot_titans_march.0401.t
	desc = agot_titans_march.0401.desc

	theme = faith
	left_portrait = {
		character = root
		animation = prayer
	}
	right_portrait = {
		character = scope:high_septon
		animation = personality_zealous
	}

	immediate = {
		title:k_the_most_devout.holder = { save_scope_as = high_septon }
		title:b_visenyas_hill = {
			title_province ={ add_special_building = holy_site_great_sept_01}
			save_scope_as = temple_location
		}
		faith:fots_blessed = {
			change_fervor = {
				value = 20
				desc = fervor_gain_built_temple_holding
			}
		}
	}

	option = {
		name = agot_titans_march.0401.a
		if = {
			limit = {
				faith.religion = religion:the_seven_religion
			}
			add_piety_level = 1
		}
	}
}

#Sept of Baelor finished as not Baelor
agot_titans_march.0402 = {
	type = character_event
	title = agot_titans_march.0402.t
	desc = agot_titans_march.0402.desc

	theme = faith
	left_portrait = {
		character = root
		animation = personality_forgiving
	}
	right_portrait = {
		character = scope:high_septon
		animation = personality_zealous
	}
	lower_center_portrait = {
		character = scope:baelor
	}

	immediate = {
		title:k_the_most_devout.holder = { save_scope_as = high_septon }
		character:Targaryen_82 = { save_scope_as = baelor }
		title:b_visenyas_hill = {
			title_province ={ add_special_building = holy_site_great_sept_01}
			save_scope_as = temple_location
		}
		faith:fots_blessed = {
			change_fervor = {
				value = 20
				desc = fervor_gain_built_temple_holding
			}
		}
	}

	option = {
		name = agot_titans_march.0402.a
		if = {
			limit = {
				faith.religion = religion:the_seven_religion
			}
			add_piety = major_piety_gain
		}
	}

	option = {
		name = agot_titans_march.0402.b
		if = {
			limit = {
				faith.religion = religion:the_seven_religion
			}
			add_piety = medium_piety_loss
		}
	}
}

#Pentos Start Event
agot_titans_march.1000 = {
	type = character_event
	title = agot_titans_march.1000.t
	desc = agot_titans_march.1000.desc

	theme = war
	left_portrait = {
		character = root
		animation = stress
	}
	right_portrait = {
		character = character:Velaron_48
		animation = personality_callous
	}

	option = {
		name = agot_titans_march.1000.a
	}
}

#Braavos Start Event
agot_titans_march.2000 = {
	type = character_event
	title = agot_titans_march.2000.t
	desc = agot_titans_march.2000.desc

	theme = war
	left_portrait = {
		character = root
		animation = personality_callous
	}
	right_portrait = {
		character = character:Estatis_6_B
		animation = stress
	}

	option = {
		name = agot_titans_march.2000.a
	}
}

#Dame of Andalos Start Event
agot_titans_march.3000 = {
	type = character_event
	title = agot_titans_march.3000.t
	desc = agot_titans_march.3000.desc

	theme = war
	left_portrait = {
		character = root
		animation = personality_bold
	}
	lower_left_portrait = {
		character = character:Velaron_48
	}
	lower_right_portrait = {
		character = character:Estatis_6_B
	}

	immediate = {
		spawn_army = {
			men_at_arms = {
				type = qarlons_fallen
				stacks = 5
			}
			location = capital_province
			name = event_troop_default_name
		}
	}

	option = {
		name = agot_titans_march.3000.a
		start_war = {
			casus_belli = county_conquest_cb
			claimant = root
			target = title:c_tikuvale.holder
			target_title = title:c_tikuvale
		}
	}

	option = {
		name = agot_titans_march.3000.b
	}
}

#Exiled Sealord
agot_titans_march.4000 = {
	type = character_event
	title = agot_titans_march.4000.t
	desc = agot_titans_march.4000.desc

	theme = intrigue_skulduggery_focus
	left_portrait = {
		character = root
		animation = rage
	}
	right_portrait = {
		character = character:Velaron_48
		animation = personality_callous
	}

	immediate = {
		character:Velaron_48 = { save_scope_as = sealord }
	}

	option = {
		name = agot_titans_march.4000.a
	}
}


scripted_effect dragon_eggs_offer_gold = {
	if = {
		limit = {
			scope:exiled_sealord = {
				any_character_artifact = {
					has_variable = dragon_egg
					count >= 3
				}
			}
		}
		scope:prince = {
			pay_short_term_gold = {
				target = scope:exiled_sealord
				gold = 5000
			}
		}
		scope:exiled_sealord = {
			every_character_artifact = {
				limit = { has_variable = dragon_egg }
				set_owner = scope:prince
			}
		}
	}
	else = {
		custom_tooltip = agot_titans_march.4001.eggs_gone
		scope:exiled_sealord = {
			add_prestige_level = -1
		}
	}
}

scripted_effect dragon_eggs_offer_men = {
	if = {
		limit = {
			scope:exiled_sealord = {
				any_character_artifact = {
					has_variable = dragon_egg
					count >= 3
				}
			}
		}
		scope:prince = {
			remove_short_term_gold = 4500
		}
		scope:exiled_sealord = {
			location = { save_scope_as = laamp_location }
			spawn_army = {
				men_at_arms = {
					type = westerosi_sellswords
					stacks = 10
				}
				men_at_arms = {
					type = mangonel
					stacks = 10
				}
				levies = 5000
				location = scope:laamp_location
				name = event_troop_default_name
			}
		}
		custom_tooltip = agot_titans_march.4001.alliance
		scope:prince = {
			create_alliance = {
				target = scope:exiled_sealord
				allied_through_owner = scope:prince
				allied_through_target = scope:exiled_sealord
			}
		}
		scope:exiled_sealord = { # This opinion modifier controls the interaction, and is removed when breaking the alliance in any way (though on_actions)
			add_opinion = {
				modifier = perk_negotiated_alliance_opinion
				target = scope:prince
			}
		}
		scope:exiled_sealord = {
			every_character_artifact = {
				limit = { has_variable = dragon_egg }
				set_owner = scope:prince
			}
		}
	}
	else = {
		custom_tooltip = agot_titans_march.4001.eggs_gone
		scope:exiled_sealord = {
			add_prestige_level = -1
		}
	}
}

scripted_effect dragon_eggs_offer_title = {
	if = {
		limit = {
			scope:exiled_sealord = {
				any_character_artifact = {
					has_variable = dragon_egg
					count >= 3
				}
			}
		}
		scope:prince = {
			remove_short_term_gold = 5000
		}
		scope:exiled_sealord = {
			# Note our courtiers so that they don't escape.
			every_courtier = { add_to_list = courtiers_list }
			# Change liege
			destroy_laamp_effect = { ADVENTURER = scope:exiled_sealord }
			hidden_effect = {
				scope:recipient.top_liege = {
					add_courtier = scope:exiled_sealord
					return_to_court = yes
				}
			}
			create_noble_family_effect = yes
			hidden_effect = {
				# Return any escaped courtiers.
				every_in_list = {
					list = courtiers_list
					scope:exiled_sealord = { add_courtier = prev }
				}
				# And boot any new autogenned arrivals.
				every_courtier = {
					limit = {
						is_lowborn = yes
						NOR = {
							is_in_list = courtiers_list
							is_close_or_extended_family_of = scope:exiled_sealord
							is_consort_of = scope:exiled_sealord
							has_important_relationship_trigger = { CHARACTER = scope:exiled_sealord }
						}
					}
					silent_disappearance_effect = yes
				}
			}
			create_title_and_vassal_change = {
				type = swear_fealty
				add_claim_on_loss = no
				save_scope_as = title_change
			}
			change_liege = {
				liege = scope:prince
				change = scope:title_change
			}
			resolve_title_and_vassal_change = scope:title_change
			change_government = administrative_government
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							domicile.domicile_location = {
								this = scope:prince.capital_province
							}
						}
					}
					domicile = {
						move_domicile = scope:prince.capital_province
					}
				}
			}
			add_character_modifier = {
				modifier = ep3_administrative_outsider_modifier
				years = 15
			}
			create_character_memory = {
				type = procured_estate_memory
				participants = { benefactor = scope:prince }
			}
			add_short_term_gold = 2000
		}
		scope:prince = {
			every_vassal_or_below = {
				limit = {
					is_ai = no
				}
				send_interface_message = {
					type = msg_landless_adventurer_nearby
					title = procure_estate_message_title
					left_icon = scope:exiled_sealord
					right_icon = scope:prince
					custom_tooltip = procure_estate_message_tt
				}
			}
		}
		scope:exiled_sealord = {
			every_character_artifact = {
				limit = { has_variable = dragon_egg }
				set_owner = scope:prince
			}
		}
	}
	else = {
		custom_tooltip = agot_titans_march.4001.eggs_gone
		scope:exiled_sealord = {
			add_prestige_level = -1
		}
	}
}

agot_titans_march.4001 = {
	type = character_event
	title = agot_titans_march.4001.t
	desc = agot_titans_march.4001.desc

	theme = stewardship
	left_portrait = {
		character = root
		animation = flirtation
	}
	right_portrait = {
		character = scope:prince
		animation = personality_rational
	}
	artifact = {
		target = scope:egg
		position = lower_center_portrait
	}

	trigger = {
		any_character_artifact = {
			has_variable = dragon_egg
			count = 3
		}
		exists = title:k_pentos.holder
	}

	immediate = {
		save_scope_as = exiled_sealord
		title:k_pentos.holder = { save_scope_as = prince }
		random_character_artifact = {
			limit = { has_variable = dragon_egg }
			save_scope_as = egg
		}
	}

	#Gold
	option = {
		name = agot_titans_march.4001.a
		custom_tooltip = agot_titans_march.4001.tooltip
		save_scope_as = offer_gold
		show_as_tooltip = {
			dragon_eggs_offer_gold = yes
		}
		scope:prince = {
			trigger_event = agot_titans_march.4002
		}
	}

	#Men
	option = {
		name = agot_titans_march.4001.b
		custom_tooltip = agot_titans_march.4001.tooltip
		save_scope_as = offer_men
		show_as_tooltip = {
			dragon_eggs_offer_men = yes
		}
		scope:prince = {
			trigger_event = agot_titans_march.4002
		}
	}

	#Uncomment for admin
	##Land
	#option = {
	#	name = agot_titans_march.4001.c
	#	custom_tooltip = agot_titans_march.4001.tooltip
	#	save_scope_as = offer_title
	#	show_as_tooltip = {
	#		dragon_eggs_offer_title = yes
	#	}
	#	scope:prince = {
	#		trigger_event = agot_titans_march.4002
	#	}
	#}

	#Keep them
	option = {
		name = agot_titans_march.4001.d
	}
}

agot_titans_march.4002 = {
	type = character_event
	title = agot_titans_march.4002.t
	desc = agot_titans_march.4002.desc

	theme = stewardship
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:exiled_sealord
		animation = flirtation_left
	}
	artifact = {
		target = scope:egg
		position = lower_center_portrait
	}

	#Accept
	option = {
		name = agot_titans_march.4002.a
		if = {
			limit = {
				exists = scope:offer_gold
			}
			dragon_eggs_offer_gold = yes
		}
		else_if = {
			limit = {
				exists = scope:offer_men
			}
			dragon_eggs_offer_men = yes
		}
		#Uncomment for admin
		#else_if = {
		#	limit = {
		#		exists = scope:offer_title
		#	}
		#	dragon_eggs_offer_title = yes
		#}

		hidden_effect = {
			scope:exiled_sealord = {
				send_interface_toast = {
					title = agot_titans_march.4002_accepted.title
					custom_tooltip = agot_titans_march.4002_accepted.desc
					left_icon = root
					right_icon = scope:prince
				}
			}
		}

		ai_chance = 55
	}

	#Counteroffer Gold
	option = {
		name = agot_titans_march.4002.b
		custom_tooltip = agot_titans_march.4002.tooltip

		trigger = {
			NOT = {
				exists = scope:offer_gold
			}
		}
		save_scope_as = counteroffer_gold
		show_as_tooltip = {
			dragon_eggs_offer_gold = yes
		}
		scope:exiled_sealord = {
			trigger_event = agot_titans_march.4003
		}

		ai_chance = 15
	}

	#Counteroffer men
	option = {
		name = agot_titans_march.4002.c
		custom_tooltip = agot_titans_march.4002.tooltip

		trigger = {
			NOT = {
				exists = scope:offer_men
			}
		}
		save_scope_as = counteroffer_men
		show_as_tooltip = {
			dragon_eggs_offer_men = yes
		}
		scope:exiled_sealord = {
			trigger_event = agot_titans_march.4003
		}

		ai_chance = 15
	}

	#Uncomment for admin
	#Counteroffer title
	#option = {
	#	name = agot_titans_march.4002.d
	#	custom_tooltip = agot_titans_march.4002.tooltip

	#	trigger = {
	#		NOT = {
	#			exists = scope:offer_title
	#		}
	#	}
	#	save_scope_as = counteroffer_title
	#	show_as_tooltip = {
	#		dragon_eggs_offer_title = yes
	#	}
	#	scope:exiled_sealord = {
	#		trigger_event = agot_titans_march.4003
	#	}

	#	ai_chance = 15
	#}

	#Deny
	option = {
		name = agot_titans_march.4002.e

		hidden_effect = {
			scope:exiled_sealord = {
				send_interface_toast = {
					title = agot_titans_march.4002_refused.title
					custom_tooltip = agot_titans_march.4002_refused.desc
					left_icon = root
					right_icon = scope:recipient
				}
			}
		}

		ai_chance = 15
	}
}

#Counter-offer
agot_titans_march.4003 = {
	type = character_event
	title = agot_titans_march.4003.t
	desc = agot_titans_march.4003.desc

	theme = war
	theme = stewardship
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:prince
		animation = flirtation
	}
	artifact = {
		target = scope:egg
		position = lower_center_portrait
	}

	#Yes
	option = {
		name = agot_titans_march.4003.a
		if = {
			limit = {
				exists = scope:counteroffer_gold
			}
			dragon_eggs_offer_gold = yes
		}
		else_if = {
			limit = {
				exists = scope:counteroffer_men
			}
			dragon_eggs_offer_men = yes
		}
		#Uncomment for admin
		#else_if = {
		#	limit = {
		#		exists = scope:counteroffer_title
		#	}
		#	dragon_eggs_offer_title = yes
		#}

		hidden_effect = {
			scope:exiled_sealord = {
				send_interface_toast = {
					title = agot_titans_march.4002_accepted.title
					custom_tooltip = agot_titans_march.4002_accepted.desc
					left_icon = root
					right_icon = scope:prince
				}
			}
		}

		ai_chance = 75
	}

	#No
	option = {
		name = agot_titans_march.4003.b

		ai_chance = 25
	}
}

# Fourth Braavosi-Pentoshi War | Pentoshi Victory
agot_titans_march.5000 = {
	type = character_event
	title = agot_titans_march.5000.t
	desc = agot_titans_march.5000.desc

	theme = war

	override_background = {
		reference = battlefield
	}
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_war.dds"
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:k_braavos.holder
		animation = shame
	}

	immediate = {
		create_title_and_vassal_change = {
			type = conquest
			save_scope_as = change
			add_claim_on_loss = yes
		}
		title:k_braavos.holder = {
			every_held_title = {
				limit = {
					any_this_title_or_de_jure_above = { this = title:k_andalos }
				}
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			every_vassal = {
				limit = {
					primary_title = {
						any_this_title_or_de_jure_above = { this = title:k_andalos }
					}
				}
				change_liege = {
					liege = root
					change = scope:change
				}
			}
		}
		resolve_title_and_vassal_change = scope:change
	}

	option = { # OK
		name = agot_titans_march.5000.a
	}
}
