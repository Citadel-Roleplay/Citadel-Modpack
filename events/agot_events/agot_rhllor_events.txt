namespace = agot_rhllor

# Seek healing from Red Priest character interaction event
agot_rhllor.0001 = {
	type = character_event
	title = agot_rhllor.0001.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					calc_true_if = {
						amount >= 2
						has_trait = wounded_1
						has_trait = wounded_2
						has_trait = wounded_3
						has_trait = ill
						has_trait = great_pox
						has_trait = early_great_pox
						has_trait = lovers_pox
						has_trait = leper
						has_trait = maimed
						has_trait = infirm
						has_trait = gout_ridden
						has_trait = consumption
						has_trait = cancer
						has_trait = typhus
						has_trait = bubonic_plague
						has_trait = smallpox
						has_trait = measles
						has_trait = dysentery
						has_trait = ergotism
						has_trait = wheezing
						has_trait = greyscale
						has_trait = spring_sickness
						has_trait = shivers
						has_trait = crippled
					}
				}
				desc = agot_rhllor.0001.multiple.desc
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = wounded_1
						has_trait = wounded_2
						has_trait = wounded_3
						has_trait = maimed
					}
				}
				desc = agot_rhllor.0001.wound.desc
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = ill
						has_trait = great_pox
						has_trait = early_great_pox
						has_trait = lovers_pox
						has_trait = consumption
						has_trait = typhus
						has_trait = bubonic_plague
						has_trait = smallpox
						has_trait = measles
						has_trait = dysentery
						has_trait = ergotism
						has_trait = spring_sickness
						has_trait = shivers
					}
				}
				desc = agot_rhllor.0001.disease.desc
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = infirm
						has_trait = gout_ridden
						has_trait = early_great_pox
						has_trait = lovers_pox
						has_trait = leper
						has_trait = cancer
						has_trait = wheezing
						has_trait = greyscale
						has_trait = crippled
					}
				}
				desc = agot_rhllor.0001.deadly_curse.desc
			}
			#desc = agot_rhllor.0001.desc
		}
	}

	theme = faith

	override_background = {
		reference = physicians_study
	}

	left_portrait = {
		character = scope:patient
		animation = pain #sick worry grief
	}

	right_portrait = {
		character = scope:red_priest
		animation = thinking
	}

	immediate = {
		scope:actor = { save_scope_as = patient }
		scope:recipient = { save_scope_as = red_priest }
	}

	#Please heal me
	option = {
		name = agot_rhllor.0001.a

		add_character_flag = {
			flag = red_priest_heal_cooldown
			years = 2
		}

		scope:red_priest = { trigger_event = agot_rhllor.0002 }

		ai_chance = {
			base = 0

			modifier = {
				add = scope:patient.ai_zeal

				scope:patient.faith.religion = religion:the_rhllor_religion
			}
		}
	}

	#Nevermind
	option = {
		name = agot_rhllor.0001.b

		ai_chance = {
			base = 0

			modifier = {
				add = scope:patient.ai_zeal

				NOT = { scope:patient.faith.religion = religion:the_rhllor_religion }
			}
		}
	}
}

# Red Priest considers
agot_rhllor.0002 = {
	type = character_event
	title = agot_rhllor.0002.t
	desc = agot_rhllor.0002.desc

	theme = faith

	override_background = {
		reference = physicians_study
	}

	left_portrait = {
		character = scope:patient
		animation = pain #sick worry grief
	}

	right_portrait = {
		character = scope:red_priest
		animation = thinking
	}

	#I'll do it
	option = {
		name = agot_rhllor.0002.a

		scope:patient = { trigger_event = agot_rhllor.0003 }

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_sociability = 0.25
				ai_honor = 0.25
			}
		}
	}

	#I'll do it if you convert
	option = {
		name = agot_rhllor.0002.b
		trigger = { NOT = { scope:patient.faith.religion = religion:the_rhllor_religion } }
		custom_tooltip = agot_rhllor.0002.b.tt

		scope:patient = { trigger_event = agot_rhllor.0004 }

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_zeal = 0.25
				ai_greed = 0.25
			}
		}
	}

	#No
	option = {
		name = agot_rhllor.0002.c

		scope:patient = { trigger_event = agot_rhllor.0005 }

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_zeal = 0.5
			}

			modifier = {
				add = -50
				scope:patient.faith.religion = religion:the_rhllor_religion
			}
		}
	}
}

# Red Priest helps me
agot_rhllor.0003 = {
	type = character_event
	title = agot_rhllor.0003.title
	desc = agot_rhllor.0003.desc

	theme = faith

	override_background = {
		reference = bp1_bonfire
	}

	left_portrait = {
		character = scope:patient
		animation = pain #sick worry grief
	}

	right_portrait = {
		character = scope:red_priest
		animation = prayer
	}

	option = {
		name = agot_rhllor.0003.a
		trigger = {
			OR = {
				has_trait = wounded_1
				has_trait = wounded_2
				has_trait = wounded_3
				has_trait = maimed
			}
		}

		show_as_tooltip = {
			if = {
				limit = { has_trait = wounded_1 }
				remove_trait = wounded_1
			}
			else_if = {
				limit = { has_trait = wounded_2 }
				remove_trait = wounded_2
			}
			else_if = {
				limit = { has_trait = wounded_3 }
				remove_trait = wounded_3
			}
			else_if = {
				limit = { has_trait = maimed }
				remove_trait = maimed
			}
		}
		add_character_flag = {
			flag = heal_wounds
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.b
		trigger = {
			has_trait = ill
		}

		show_as_tooltip = {
			remove_trait = ill
		}
		add_character_flag = {
			flag = heal_ill
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.c
		trigger = {
			has_trait = great_pox
		}

		show_as_tooltip = {
			remove_trait = great_pox
		}
		add_character_flag = {
			flag = heal_great_pox
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.d
		trigger = {
			has_trait = early_great_pox
		}

		show_as_tooltip = {
			remove_trait = early_great_pox
		}
		add_character_flag = {
			flag = heal_early_great_pox
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.e
		trigger = {
			has_trait = lovers_pox
		}

		show_as_tooltip = {
			remove_trait = lovers_pox
		}
		add_character_flag = {
			flag = heal_lovers_pox
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.f
		trigger = {
			has_trait = leper
		}

		show_as_tooltip = {
			remove_trait = leper
		}
		add_character_flag = {
			flag = heal_leper
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.g
		trigger = {
			has_trait = infirm
		}

		show_as_tooltip = {
			remove_trait = infirm
		}
		add_character_flag = {
			flag = heal_infirm
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.h
		trigger = {
			has_trait = gout_ridden
		}

		show_as_tooltip = {
			remove_trait = gout_ridden
		}
		add_character_flag = {
			flag = heal_gout_ridden
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.i
		trigger = {
			has_trait = consumption
		}

		show_as_tooltip = {
			remove_trait = consumption
		}
		add_character_flag = {
			flag = heal_consumption
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.j
		trigger = {
			has_trait = cancer
		}

		show_as_tooltip = {
			remove_trait = cancer
		}
		add_character_flag = {
			flag = heal_cancer
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.k
		trigger = {
			has_trait = typhus
		}

		show_as_tooltip = {
			remove_trait = typhus
		}
		add_character_flag = {
			flag = heal_typhus
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.l
		trigger = {
			has_trait = bubonic_plague
		}

		show_as_tooltip = {
			remove_trait = bubonic_plague
		}
		add_character_flag = {
			flag = heal_bubonic_plague
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.m
		trigger = {
			has_trait = smallpox
		}

		show_as_tooltip = {
			remove_trait = smallpox
		}
		add_character_flag = {
			flag = heal_smallpox
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.n
		trigger = {
			has_trait = measles
		}

		show_as_tooltip = {
			remove_trait = measles
		}
		add_character_flag = {
			flag = heal_measles
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.o
		trigger = {
			has_trait = dysentery
		}

		show_as_tooltip = {
			remove_trait = dysentery
		}
		add_character_flag = {
			flag = heal_dysentery
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.p
		trigger = {
			has_trait = ergotism
		}

		show_as_tooltip = {
			remove_trait = ergotism
		}
		add_character_flag = {
			flag = heal_ergotism
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.q
		trigger = {
			has_trait = wheezing
		}

		show_as_tooltip = {
			remove_trait = wheezing
		}
		add_character_flag = {
			flag = heal_wheezing
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.r
		trigger = {
			has_trait = greyscale
		}

		show_as_tooltip = {
			remove_trait = greyscale
		}
		add_character_flag = {
			flag = heal_greyscale
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.s
		trigger = {
			has_trait = spring_sickness
		}

		show_as_tooltip = {
			remove_trait = spring_sickness
		}
		add_character_flag = {
			flag = heal_spring_sickness
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.t
		trigger = {
			has_trait = shivers
		}

		show_as_tooltip = {
			remove_trait = shivers
		}
		add_character_flag = {
			flag = heal_shivers
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}

	option = {
		name = agot_rhllor.0003.u
		trigger = {
			has_trait = crippled
		}

		show_as_tooltip = {
			remove_trait = crippled
		}
		add_character_flag = {
			flag = heal_crippled
			days = 40
		}
		scope:red_priest = { trigger_event = agot_rhllor.0007 }

		ai_chance = {
			base = 1000
		}
	}
}

# Red Priest helps me if I convert
agot_rhllor.0004 = {
	type = character_event
	title = agot_rhllor.0004.t
	desc = agot_rhllor.0004.desc

	theme = faith

	override_background = {
		reference = physicians_study
	}

	left_portrait = {
		character = scope:patient
		animation = pain #sick worry grief
	}

	right_portrait = {
		character = scope:red_priest
		animation = thinking
	}

	#I convert
	option = {
		name = agot_rhllor.0004.a

		scope:patient = { set_character_faith = scope:red_priest.faith }
		scope:patient = { trigger_event = agot_rhllor.0003 }

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_zeal = -1
			}
		}
	}

	#I won't convert
	option = {
		name = agot_rhllor.0004.b

		scope:red_priest = { trigger_event = agot_rhllor.0006 }

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_honor = 1
			}
		}
	}
}

# Red Priest won't help me
agot_rhllor.0005 = {
	type = character_event
	title = agot_rhllor.0005.t
	desc = agot_rhllor.0005.desc

	theme = faith

	override_background = {
		reference = physicians_study
	}

	right_portrait = {
		character = scope:patient
		animation = worry
	}

	#Ok
	option = {
		name = agot_rhllor.0005.a

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_honor = 1
			}
		}
	}

	#Imprison them (if other religion)
	option = {
		name = agot_rhllor.0005.b
		trigger = { NOT = { scope:patient.faith.religion = religion:the_rhllor_religion } }

		scope:patient = {
			hard_imprison_character_effect = {
				TARGET = scope:red_priest
				IMPRISONER = scope:patient
			}
		}

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_rationality = -1
			}
		}
	}
}

# Liege refused to convert
agot_rhllor.0006 = {
	type = character_event
	title = agot_rhllor.0006.t
	desc = agot_rhllor.0006.desc

	theme = faith

	override_background = {
		reference = physicians_study
	}

	left_portrait = {
		character = scope:patient
		animation = worry
	}

	right_portrait = {
		character = scope:red_priest
		animation = thinking
	}

	#Ok
	option = {
		name = agot_rhllor.0006.a

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_honor = 1
			}
		}
	}

	#They will regret it (rival)
	option = {
		name = agot_rhllor.0006.b
		trigger = { can_set_relation_rival_trigger = { CHARACTER = scope:patient } }

		set_relation_rival = {
			target = scope:patient
			reason = rival_refused_to_see_reason
		}

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_zeal = 1
			}
		}
	}
}

# Full Success/Partial Success/Failure Outcomes
agot_rhllor.0007 = {
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_character_flag = rhllor_healing_failure
							has_character_flag = rhllor_healing_critical_failure
						}
					}
				}
				desc = agot_rhllor.0007.t.failure
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_character_flag = rhllor_healing_success
							has_character_flag = rhllor_healing_critical_success
						}
					}
				}
				desc = agot_rhllor.0007.t.success
			}
		}
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { this = scope:patient scope:patient = { has_character_flag = rhllor_healing_failure } }
				desc = agot_rhllor.0007.patient.fail.desc
			}
			triggered_desc = {
				trigger = { this = scope:patient scope:patient = { has_character_flag = rhllor_healing_critical_failure } }
				desc = agot_rhllor.0007.patient.crit_fail.desc
			}
			triggered_desc = {
				trigger = { this = scope:patient scope:patient = { has_character_flag = rhllor_healing_success } }
				desc = agot_rhllor.0007.patient.succ.desc
			}
			triggered_desc = {
				trigger = { this = scope:patient scope:patient = { has_character_flag = rhllor_healing_critical_success } }
				desc = agot_rhllor.0007.patient.crit_succ.desc
			}
			triggered_desc = {
				trigger = { this = scope:red_priest scope:patient = { has_character_flag = rhllor_healing_failure } }
				desc = agot_rhllor.0007.red_priest.fail.desc
			}
			triggered_desc = {
				trigger = { this = scope:red_priest scope:patient = { has_character_flag = rhllor_healing_critical_failure } }
				desc = agot_rhllor.0007.red_priest.crit_fail.desc
			}
			triggered_desc = {
				trigger = { this = scope:red_priest scope:patient = { has_character_flag = rhllor_healing_success } }
				desc = agot_rhllor.0007.red_priest.succ.desc
			}
			triggered_desc = {
				trigger = { this = scope:red_priest scope:patient = { has_character_flag = rhllor_healing_critical_success } }
				desc = agot_rhllor.0007.red_priest.crit_succ.desc
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = { this = scope:patient scope:patient = { has_character_flag = rhllor_healing_failure } }
				desc = agot_rhllor.0007.patient.fail.outro_desc
			}
			triggered_desc = {
				trigger = { this = scope:patient scope:patient = { has_character_flag = rhllor_healing_critical_failure } }
				desc = agot_rhllor.0007.patient.crit_fail.outro_desc
			}
			triggered_desc = {
				trigger = { this = scope:patient scope:patient = { has_character_flag = rhllor_healing_success } }
				desc = agot_rhllor.0007.patient.succ.outro_desc
			}
			triggered_desc = {
				trigger = { this = scope:patient scope:patient = { has_character_flag = rhllor_healing_critical_success } }
				desc = agot_rhllor.0007.patient.crit_succ.outro_desc
			}
			triggered_desc = {
				trigger = { this = scope:red_priest scope:patient = { has_character_flag = rhllor_healing_failure } }
				desc = agot_rhllor.0007.red_priest.fail.outro_desc
			}
			triggered_desc = {
				trigger = { this = scope:red_priest scope:patient = { has_character_flag = rhllor_healing_critical_failure } }
				desc = agot_rhllor.0007.red_priest.crit_fail.outro_desc
			}
			triggered_desc = {
				trigger = { this = scope:red_priest scope:patient = { has_character_flag = rhllor_healing_success } }
				desc = agot_rhllor.0007.red_priest.succ.outro_desc
			}
			triggered_desc = {
				trigger = { this = scope:red_priest scope:patient = { has_character_flag = rhllor_healing_critical_success } }
				desc = agot_rhllor.0007.red_priest.crit_succ.outro_desc
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = wounded_1
							has_trait = wounded_2
							has_trait = wounded_3
							has_trait = maimed
						}
						has_character_flag = rhllor_healing_success
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.succ_wounds.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = ill
							has_trait = great_pox
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = consumption
							has_trait = typhus
							has_trait = bubonic_plague
							has_trait = smallpox
							has_trait = measles
							has_trait = dysentery
							has_trait = ergotism
							has_trait = spring_sickness
							has_trait = shivers
						}
						has_character_flag = rhllor_healing_success
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.succ_disease.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = infirm
							has_trait = gout_ridden
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = leper
							has_trait = cancer
							has_trait = wheezing
							has_trait = greyscale
							has_trait = crippled
						}
						has_character_flag = rhllor_healing_success
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.succ_curse.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = wounded_1
							has_trait = wounded_2
							has_trait = wounded_3
							has_trait = maimed
						}
						has_character_flag = rhllor_healing_critical_success
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.crit_succ_wounds.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = ill
							has_trait = great_pox
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = consumption
							has_trait = typhus
							has_trait = bubonic_plague
							has_trait = smallpox
							has_trait = measles
							has_trait = dysentery
							has_trait = ergotism
							has_trait = spring_sickness
							has_trait = shivers
						}
						has_character_flag = rhllor_healing_critical_success
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.crit_succ_disease.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = infirm
							has_trait = gout_ridden
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = leper
							has_trait = cancer
							has_trait = wheezing
							has_trait = greyscale
							has_trait = crippled
						}
						has_character_flag = rhllor_healing_critical_success
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.crit_succ_curse.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = wounded_1
							has_trait = wounded_2
							has_trait = wounded_3
							has_trait = maimed
						}
						has_character_flag = rhllor_healing_failure
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.fail_wounds.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = ill
							has_trait = great_pox
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = consumption
							has_trait = typhus
							has_trait = bubonic_plague
							has_trait = smallpox
							has_trait = measles
							has_trait = dysentery
							has_trait = ergotism
							has_trait = spring_sickness
							has_trait = shivers
						}
						has_character_flag = rhllor_healing_failure
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.fail_disease.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = infirm
							has_trait = gout_ridden
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = leper
							has_trait = cancer
							has_trait = wheezing
							has_trait = greyscale
							has_trait = crippled
						}
						has_character_flag = rhllor_healing_failure
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.fail_curse.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = wounded_1
							has_trait = wounded_2
							has_trait = wounded_3
							has_trait = maimed
						}
						has_character_flag = rhllor_healing_critical_failure
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.crit_fail_wounds.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = ill
							has_trait = great_pox
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = consumption
							has_trait = typhus
							has_trait = bubonic_plague
							has_trait = smallpox
							has_trait = measles
							has_trait = dysentery
							has_trait = ergotism
							has_trait = spring_sickness
							has_trait = shivers
						}
						has_character_flag = rhllor_healing_critical_failure
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.crit_fail_disease.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = infirm
							has_trait = gout_ridden
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = leper
							has_trait = cancer
							has_trait = wheezing
							has_trait = greyscale
							has_trait = crippled
						}
						has_character_flag = rhllor_healing_critical_failure
					}
					this = scope:patient
				}
				desc = agot_rhllor.0007.patient.crit_fail_curse.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = wounded_1
							has_trait = wounded_2
							has_trait = wounded_3
							has_trait = maimed
						}
						has_character_flag = rhllor_healing_success
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.succ_wounds.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = ill
							has_trait = great_pox
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = consumption
							has_trait = typhus
							has_trait = bubonic_plague
							has_trait = smallpox
							has_trait = measles
							has_trait = dysentery
							has_trait = ergotism
							has_trait = spring_sickness
							has_trait = shivers
						}
						has_character_flag = rhllor_healing_success
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.succ_disease.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = infirm
							has_trait = gout_ridden
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = leper
							has_trait = cancer
							has_trait = wheezing
							has_trait = greyscale
							has_trait = crippled
						}
						has_character_flag = rhllor_healing_success
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.succ_curse.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = wounded_1
							has_trait = wounded_2
							has_trait = wounded_3
							has_trait = maimed
						}
						has_character_flag = rhllor_healing_critical_success
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.crit_succ_wounds.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = ill
							has_trait = great_pox
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = consumption
							has_trait = typhus
							has_trait = bubonic_plague
							has_trait = smallpox
							has_trait = measles
							has_trait = dysentery
							has_trait = ergotism
							has_trait = spring_sickness
							has_trait = shivers
						}
						has_character_flag = rhllor_healing_critical_success
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.crit_succ_disease.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = infirm
							has_trait = gout_ridden
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = leper
							has_trait = cancer
							has_trait = wheezing
							has_trait = greyscale
							has_trait = crippled
						}
						has_character_flag = rhllor_healing_critical_success
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.crit_succ_curse.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = wounded_1
							has_trait = wounded_2
							has_trait = wounded_3
							has_trait = maimed
						}
						has_character_flag = rhllor_healing_failure
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.fail_wounds.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = ill
							has_trait = great_pox
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = consumption
							has_trait = typhus
							has_trait = bubonic_plague
							has_trait = smallpox
							has_trait = measles
							has_trait = dysentery
							has_trait = ergotism
							has_trait = spring_sickness
							has_trait = shivers
						}
						has_character_flag = rhllor_healing_failure
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.fail_disease.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = infirm
							has_trait = gout_ridden
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = leper
							has_trait = cancer
							has_trait = wheezing
							has_trait = greyscale
							has_trait = crippled
						}
						has_character_flag = rhllor_healing_failure
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.fail_curse.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = wounded_1
							has_trait = wounded_2
							has_trait = wounded_3
							has_trait = maimed
						}
						has_character_flag = rhllor_healing_critical_failure
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.crit_fail_wounds.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = ill
							has_trait = great_pox
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = consumption
							has_trait = typhus
							has_trait = bubonic_plague
							has_trait = smallpox
							has_trait = measles
							has_trait = dysentery
							has_trait = ergotism
							has_trait = spring_sickness
							has_trait = shivers
						}
						has_character_flag = rhllor_healing_critical_failure
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.crit_fail_disease.outro_desc
			}
			triggered_desc = {
				trigger = {
					scope:patient = {
						OR = {
							has_trait = infirm
							has_trait = gout_ridden
							has_trait = early_great_pox
							has_trait = lovers_pox
							has_trait = leper
							has_trait = cancer
							has_trait = wheezing
							has_trait = greyscale
							has_trait = crippled
						}
						has_character_flag = rhllor_healing_critical_failure
					}
					this = scope:red_priest
				}
				desc = agot_rhllor.0007.red_priest.crit_fail_curse.outro_desc
			}
		}
	}

	theme = faith

	override_background = {
		reference = bp1_bonfire
	}

	left_portrait = {
		character = scope:patient
		triggered_animation = {
			trigger = {
				scope:patient = {
					OR = {
						has_character_flag = rhllor_healing_failure
						has_character_flag = rhllor_healing_critical_failure
					}
				}
			}
			animation = disbelief
		}
		triggered_animation = {
			trigger = {
				scope:patient = {
					OR = {
						has_character_flag = rhllor_healing_success
						has_character_flag = rhllor_healing_critical_success
					}
				}
			}
			animation = ecstasy
		}
	}

	right_portrait = {
		character = scope:red_priest
		animation = prayer
	}

	immediate = {
		if = {
			limit = { this = scope:red_priest }
			random_list = {
				#Failure
				100 = {
					modifier = {
						add = -50
						scope:red_priest.piety_level >= 2
					}
					modifier = {
						add = -50
						AND = {
							scope:patient.faith.religion = religion:the_rhllor_religion
							scope:red_priest.piety_level >= 2
						}
					}

					random_list = {
						#Simple Failure
						75 = {
							scope:patient = {
								add_character_flag = {
									flag = rhllor_healing_failure
									days = 40
								}
							}
						}
						#Critical Failure
						25 = {
							scope:patient = {
								add_character_flag = {
									flag = rhllor_healing_critical_failure
									days = 40
								}
							}
						}
					}
				}
				#Success
				100 = {
					modifier = {
						add = -50
						NOT = { scope:patient.faith.religion = religion:the_rhllor_religion }
					}
					modifier = {
						add = -50
						scope:red_priest.piety_level = 0
					}
					modifier = {
						add = {
							value = scope:red_priest.ai_zeal
							multiply = 0.5
						}
					}

					random_list = {
						#Simple Success
						75 = {
							scope:patient = {
								add_character_flag = {
									flag = rhllor_healing_success
									days = 40
								}
							}
						}
						#Critical Success
						25 = {
							scope:patient = {
								add_character_flag = {
									flag = rhllor_healing_critical_success
									days = 40
								}
							}
						}
					}
				}
			}
		}
	}

	#Ok
	option = {
		name = {
			trigger = {
				this = scope:patient
				scope:patient = { has_character_flag = rhllor_healing_success }
			}
			text = agot_rhllor.0007.a.patient.success
		}
		name = {
			trigger = {
				this = scope:patient
				scope:patient = { has_character_flag = rhllor_healing_critical_success }
			}
			text = agot_rhllor.0007.a.patient.crit_success
		}
		name = {
			trigger = {
				this = scope:patient
				scope:patient = { has_character_flag = rhllor_healing_failure }
			}
			text = agot_rhllor.0007.a.patient.failure
		}
		name = {
			trigger = {
				this = scope:patient
				scope:patient = { has_character_flag = rhllor_healing_critical_failure }
			}
			text = agot_rhllor.0007.a.patient.crit_failure
		}
		name = {
			trigger = {
				this = scope:red_priest
				scope:patient = { has_character_flag = rhllor_healing_success }
			}
			text = agot_rhllor.0007.a.red_priest.success
		}
		name = {
			trigger = {
				this = scope:red_priest
				scope:patient = { has_character_flag = rhllor_healing_critical_success }
			}
			text = agot_rhllor.0007.a.red_priest.crit_success
		}
		name = {
			trigger = {
				this = scope:red_priest
				scope:patient = { has_character_flag = rhllor_healing_failure }
			}
			text = agot_rhllor.0007.a.red_priest.failure
		}
		name = {
			trigger = {
				this = scope:red_priest
				scope:patient = { has_character_flag = rhllor_healing_critical_failure }
			}
			text = agot_rhllor.0007.a.red_priest.crit_failure
		}

		if = {
			limit = {
				this = scope:patient
				scope:patient = { has_character_flag = rhllor_healing_success }
			}
			scope:patient = {
				agot_rhllor_healing_flames_effect = yes
			}
		}
		else_if = {
			limit = {
				this = scope:patient
				scope:patient = {
					has_character_flag = rhllor_healing_critical_success
					NOT = { has_character_modifier = agot_healing_flames_critical_success }
				}
			}
			scope:patient = {
				agot_rhllor_healing_flames_effect = yes
				add_character_modifier = {
					modifier = agot_healing_flames_critical_success
					years = 5
				}
			}
		}
		else_if = {
			limit = {
				this = scope:patient
				scope:patient = { has_character_flag = rhllor_healing_critical_failure }
			}
			scope:patient = {
				add_trait = burned
				add_trait_xp = {
					trait = burned
					value = {
						integer_range = {
							min = 25
							max = 50
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				this = scope:red_priest
				scope:patient = { has_character_flag = rhllor_healing_success }
			}
			show_as_tooltip = {
				scope:patient = {
					agot_rhllor_healing_flames_effect = yes
				}
			}
		}
		else_if = {
			limit = {
				this = scope:red_priest
				scope:patient = { has_character_flag = rhllor_healing_critical_success }
			}
			show_as_tooltip = {
				scope:patient = {
					agot_rhllor_healing_flames_effect = yes
					add_character_modifier = {
						modifier = agot_healing_flames_critical_success
						years = 5
					}
				}
			}
		}
		else_if = {
			limit = {
				this = scope:red_priest
				scope:patient = { has_character_flag = rhllor_healing_critical_failure }
			}
			show_as_tooltip = {
				scope:patient = {
					add_trait = burned
					add_trait_xp = {
						trait = burned
						value = {
							integer_range = {
								min = 25
								max = 50
							}
						}
					}
				}
			}
		}

		if = {
			limit = {
				this = scope:patient
				scope:patient = {
					OR = {
						has_character_flag = rhllor_healing_success
						has_character_flag = rhllor_healing_critical_success
					}
				}
			}
			scope:patient = {
				add_opinion = {
					target = scope:red_priest
					modifier = saved_my_life_opinion
					opinion = 50
				}
			}
		}

		if = {
			limit = {
				this = scope:red_priest
				scope:patient = {
					OR = {
						has_character_flag = rhllor_healing_success
						has_character_flag = rhllor_healing_critical_success
					}
				}
			}
			scope:red_priest = {
				add_piety = 100
				add_character_flag = successful_healing_flames_treatment
				if = {
					limit = { NOT = { has_character_flag = successful_healing_flames_treatment } }
					add_piety_level = 1
				}
			}
		}

		if = {
			limit = { this = scope:red_priest }
			scope:patient = { trigger_event = agot_rhllor.0007 }
		}

		ai_chance = {
			base = 50
		}
	}

	#I'll convert too!
	option = {
		name = agot_rhllor.0007.b
		trigger = {
			this = scope:patient
			OR = {
				scope:patient = { has_character_flag = rhllor_healing_success }
				scope:patient = { has_character_flag = rhllor_healing_critical_success }
			}
			NOT = { scope:patient.faith.religion = religion:the_rhllor_religion }
		}

		if = {
			limit = {
				this = scope:patient
				scope:patient = { has_character_flag = rhllor_healing_success }
			}
			scope:patient = {
				agot_rhllor_healing_flames_effect = yes
			}
		}
		else_if = {
			limit = {
				this = scope:patient
				scope:patient = {
					has_character_flag = rhllor_healing_critical_success
					NOT = { has_character_modifier = agot_healing_flames_critical_success }
				}
			}
			scope:patient = {
				agot_rhllor_healing_flames_effect = yes
				add_character_modifier = {
					modifier = agot_healing_flames_critical_success
					years = 5
				}
			}
		}

		scope:patient = {
			set_character_faith = scope:red_priest.faith
			add_opinion = {
				target = scope:red_priest
				modifier = saved_my_life_opinion
				opinion = 50
			}
		}

		ai_chance = {
			base = 50

			modifier = {
				add = 50
				scope:patient = { has_character_flag = rhllor_healing_critical_success }
			}

			ai_value_modifier = {
				ai_zeal = -0.5
			}
		}
	}

	#This was a huge mistake
	option = {
		name = agot_rhllor.0007.c
		trigger = {
			this = scope:patient
			OR = {
				scope:patient = { has_character_flag = rhllor_healing_failure }
				scope:patient = { has_character_flag = rhllor_healing_critical_failure }
			}
			NOT = { scope:patient.faith.religion = religion:the_rhllor_religion }
		}

		if = {
			limit = {
				this = scope:patient
				scope:patient = { has_character_flag = rhllor_healing_critical_failure }
			}
			scope:patient = {
				add_trait = burned
				add_trait_xp = {
					trait = burned
					value = {
						integer_range = {
							min = 25
							max = 50
						}
					}
				}
			}
		}

		scope:patient = {
			add_opinion = {
				target = scope:red_priest
				modifier = angry_opinion
				opinion = -50
			}
			hard_imprison_character_effect = {
				TARGET = scope:red_priest
				IMPRISONER = scope:patient
			}
		}

		ai_chance = {
			base = 50

			modifier = {
				add = 50
				scope:patient = { has_character_flag = rhllor_healing_critical_failure }
			}

			ai_value_modifier = {
				ai_zeal = 0.5
			}
		}
	}
}

# Red Priest offers their help
agot_rhllor.0008 = {
	type = character_event
	title = agot_rhllor.0008.t
	desc = agot_rhllor.0008.desc

	theme = faith

	override_background = {
		reference = physicians_study
	}

	right_portrait = {
		character = scope:red_priest
		animation = thinking
	}

	immediate = {
		scope:recipient = { save_scope_as = patient }
		scope:actor = { save_scope_as = red_priest }
	}

	#Yes please help
	option = {
		name = agot_rhllor.0008.a

		add_character_flag = {
			flag = red_priest_heal_cooldown
			years = 2
		}

		scope:patient = { trigger_event = agot_rhllor.0003 }

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_rationality = 1
			}
		}
	}

	#No
	option = {
		name = agot_rhllor.0008.b

		add_character_flag = {
			flag = blocked_from_red_priest_healing
			years = 5
		}

		ai_chance = {
			base = 50
		}
	}
}

# Red Priest offers their help if I convert
agot_rhllor.0009 = {
	type = character_event
	title = agot_rhllor.0009.t
	desc = agot_rhllor.0009.desc

	theme = faith

	override_background = {
		reference = physicians_study
	}

	right_portrait = {
		character = scope:red_priest
		animation = thinking
	}

	immediate = {
		scope:recipient = { save_scope_as = patient }
		scope:actor = { save_scope_as = red_priest }
	}

	#Yes please help I convert
	option = {
		name = agot_rhllor.0009.a
		trigger = { NOT = { scope:patient.faith.religion = religion:the_rhllor_religion } }

		add_character_flag = {
			flag = red_priest_heal_cooldown
			years = 2
		}

		scope:patient = { set_character_faith = scope:red_priest.faith }
		scope:patient = { trigger_event = agot_rhllor.0003 }

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_zeal = -1
			}
		}
	}

	#No
	option = {
		name = agot_rhllor.0009.b

		add_character_flag = {
			flag = blocked_from_red_priest_healing
			years = 5
		}

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_honor = 1
			}
		}
	}

	#No, imprison them
	option = {
		name = agot_rhllor.0009.c
		trigger = { NOT = { scope:patient.faith.religion = religion:the_rhllor_religion } }

		add_character_flag = {
			flag = blocked_from_red_priest_healing
			years = 5
		}

		scope:patient = {
			hard_imprison_character_effect = {
				TARGET = scope:red_priest
				IMPRISONER = scope:patient
			}
		}

		ai_chance = {
			base = 0

			ai_value_modifier = {
				ai_rationality = -1
			}
		}
	}
}